/* (c) Mathigon */
!function(){"use strict";function t(t,...e){for(let n of e)if(t===n)return!0;return!1}const e=(t,e)=>t.concat(e);function n(){let t=t=>{},e=t=>{};const n=new Promise((n,r)=>{t=n,e=r});return n.catch(t=>t),{promise:n,resolve:t,reject:e}}function r(t,e=0){let n=!1,r=!1;return function(...i){n?r=!0:(t(...i),n=!0,setTimeout((function(){r&&t(...i),n=!1,r=!1}),e))}}function i(t,e={}){if(!t)return e;try{return JSON.parse(t)||e}catch(t){return e}}function o(t,e){return new Array(e).fill(t)}function s(t,e=0){return t[t.length-1-e]}function a(t){return t.reduce((t,e)=>t+e,0)}function c(t,e=/\s+/){return t?t.trim().split(e):[]}class l{constructor(){this.events=new Map}on(t,e){for(let n of c(t))this.events.has(n)||this.events.set(n,[]),this.events.get(n).push(e)}one(t,e){this.on(t,n=>{this.off(t,e),e(n)})}off(t,e){for(let n of c(t))this.events.has(n)&&this.events.set(n,this.events.get(n).filter(t=>t!==e))}trigger(t,e){for(let n of c(t))if(this.events.has(n))for(const t of this.events.get(n))t(e)}}function h(t){const e=[];for(let n of Object.keys(t)){let r=t[n];n=encodeURIComponent(n),null!=r?(r=(r=Array.isArray(r)?r.join(","):""+r).replace(/(\r)?\n/g,"\r\n"),r=(r=encodeURIComponent(r)).replace(/%20/g,"+"),e.push(n+"="+r)):e.push(n)}return e.join("&")}function u(t,e){const n={method:"POST",body:e?"string"==typeof e?e:h(e):void 0,headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":window.csrfToken||""}};return fetch(t,n).then(t=>t.text())}const d=new Map;function f(t,n){d.has(t)?function t(n,r,i=e){for(const e of Object.keys(r))e in n&&Array.isArray(n[e])&&Array.isArray(r[e])?n[e]=i(n[e],r[e]):e in n&&n[e]instanceof Object&&r[e]instanceof Object?t(n[e],r[e]):n[e]=r[e]}(d.get(t),n,(t,e)=>(function(t){return t.filter((e,n)=>t.indexOf(e)===n)})(t.concat(e))):d.set(t,n)}function p(){if(window.navigator.onLine)for(const[t,e]of d)d.delete(t),u(t,{data:JSON.stringify(e)}).catch(n=>{console.error("Failed to send POST request:",n),f(t,e)})}const g=r(p,5e3);function m(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}c((r=r.apply(t,e||[])).next())}))}window.addEventListener("online",g),window.onbeforeunload=p;const w=1e-6;function y(t,e,n=w){return!isNaN(t)&&!isNaN(e)&&Math.abs(t-e)<n}function v(t,e,n,r=w){return e>n&&([e,n]=[n,e]),t>e+r&&t<n-r}function x(t,e=1){return Math.round(t/e)*e}function _(t,e=-1/0,n=1/0){return Math.min(n,Math.max(e,t))}function b(t,e,n=.5){return t+(e-t)*n}function M(t){return t*t}function T(t,e=0){const n=function t(e){if(1===e.length)return[[],e];const n=e.pop(),r=t(e),i=[];for(const t of r)i.push(t,[...t,n]);return i}(t.slice(0));return e?n.filter(t=>t.length===e):n}class k{constructor(t=0,e=0){this.x=t,this.y=e,this.type="point"}get unitVector(){return y(this.length,0)?new k(1,0):this.scale(1/this.length)}get length(){return Math.sqrt(this.x**2+this.y**2)}get inverse(){return new k(-this.x,-this.y)}get flip(){return new k(this.y,this.x)}get perpendicular(){return new k(-this.y,this.x)}get array(){return[this.x,this.y]}distanceFromLine(t){return k.distance(this,t.project(this))}clamp(t,e,n,r){return new k(_(this.x,t,e),_(this.y,n,r))}transform(t){const e=t[0][0]*this.x+t[0][1]*this.y+t[0][2],n=t[1][0]*this.x+t[1][1]*this.y+t[1][2];return new k(e,n)}rotate(t,e=A){const n=this.x-e.x,r=this.y-e.y,i=Math.cos(t),o=Math.sin(t),s=n*i-r*o+e.x,a=n*o+r*i+e.y;return new k(s,a)}reflect(t){let e=t.p2.x-t.p1.x,n=t.p2.y-t.p1.y,r=this.x-t.p1.x,i=(e*(this.y-t.p1.y)-n*r)/(e*e+n*n),o=this.x+2*i*n,s=this.y-2*i*e;return new k(o,s)}scale(t,e=t){return new k(this.x*t,this.y*e)}shift(t,e=t){return new k(this.x+t,this.y+e)}translate(t){return this.shift(t.x,t.y)}changeCoordinates(t,e){const n=e.xMin+(this.x-t.xMin)/t.dx*e.dx,r=e.yMin+(this.y-t.yMin)/t.dy*e.dy;return new k(n,r)}add(t){return k.sum(this,t)}subtract(t){return k.difference(this,t)}equals(t){return y(this.x,t.x)&&y(this.y,t.y)}round(t=1){return new k(x(this.x,t),x(this.y,t))}floor(){return new k(Math.floor(this.x),Math.floor(this.y))}mod(t,e=t){return new k(this.x%t,this.y%e)}angle(t=A){return L(this,t)}static average(...t){let e=a(t.map(t=>t.x))/t.length,n=a(t.map(t=>t.y))/t.length;return new k(e,n)}static dot(t,e){return t.x*e.x+t.y*e.y}static sum(t,e){return new k(t.x+e.x,t.y+e.y)}static difference(t,e){return new k(t.x-e.x,t.y-e.y)}static distance(t,e){return Math.sqrt(M(t.x-e.x)+M(t.y-e.y))}static manhattan(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}static interpolate(t,e,n=.5){return new k(b(t.x,e.x,n),b(t.y,e.y,n))}static interpolateList(t,e=.5){const n=t.length-1,r=Math.floor(_(e,0,1)*n);return k.interpolate(t[r],t[r+1],n*e-r)}static fromPolar(t,e=1){return new k(e*Math.cos(t),e*Math.sin(t))}}const A=new k(0,0),C=2*Math.PI;function L(t,e=A){return(Math.atan2(t.y-e.y,t.x-e.x)+C)%C}class ${constructor(t,e){this.p1=t,this.p2=e,this.type="line"}make(t,e){return new $(t,e)}get length(){return k.distance(this.p1,this.p2)}get midpoint(){return k.average(this.p1,this.p2)}get slope(){return(this.p2.y-this.p1.y)/(this.p2.x-this.p1.x)}get intercept(){return this.p1.y+this.slope*this.p1.x}get angle(){return L(this.p2,this.p1)}get unitVector(){return this.p2.subtract(this.p1).unitVector}get perpendicularVector(){return new k(this.p2.y-this.p1.y,this.p1.x-this.p2.x).unitVector}parallel(t){const e=k.sum(t,k.difference(this.p2,this.p1));return new $(t,e)}perpendicular(t){return new $(t,k.sum(t,this.perpendicularVector))}get perpendicularBisector(){return this.perpendicular(this.midpoint)}project(t){const e=k.difference(this.p2,this.p1),n=k.difference(t,this.p1),r=e.scale(k.dot(e,n)/this.length**2);return k.sum(this.p1,r)}contains(t){return y(t.x*(this.p1.y-this.p2.y)+this.p1.x*(this.p2.y-t.y)+this.p2.x*(t.y-this.p1.y),0)}at(t){return k.interpolate(this.p1,this.p2,t)}transform(t){return new this.constructor(this.p1.transform(t),this.p2.transform(t))}rotate(t,e=A){return new this.constructor(this.p1.rotate(t,e),this.p2.rotate(t,e))}reflect(t){return new this.constructor(this.p1.reflect(t),this.p2.reflect(t))}scale(t,e=t){return this.make(this.p1.scale(t,e),this.p2.scale(t,e))}shift(t,e=t){return this.make(this.p1.shift(t,e),this.p2.shift(t,e))}translate(t){return this.shift(t.x,t.y)}equals(t){return this.contains(t.p1)&&this.contains(t.p2)}}function E(t,e){return y(t.p1.x,t.p2.x)?v(e.y,t.p1.y,t.p2.y):v(e.x,t.p1.x,t.p2.x)}function S(t,e){return y(t.p1.x,t.p2.x)?(e.y-t.p1.y)/(t.p2.y-t.p1.y)>0:(e.x-t.p1.x)/(t.p2.x-t.p1.x)>0}function P(t,e){const n=t.p2.x-t.p1.x,r=t.p2.y-t.p1.y,i=M(n)+M(r),o=e.c.x,s=e.c.y,a=(t.p1.x-o)*(t.p2.y-s)-(t.p2.x-o)*(t.p1.y-s),c=M(e.r)*i-M(a);if(c<0)return[];const l=a*r/i,h=-a*n/i;if(y(c,0))return[e.c.shift(l,h)];const u=n*(r<0?-1:1)*Math.sqrt(c)/i,d=Math.abs(r)*Math.sqrt(c)/i;return[e.c.shift(l+u,h+d),e.c.shift(l-u,h-d)]}function I(e){return t(e.type,"polygon","polyline","rectangle")}function V(e){return t(e.type,"line","ray","segment")}function O(t){return"circle"===t.type}function N(...t){if(t.length<2)return[];if(t.length>2)return function t(e){return e.reduce((e,n)=>e.concat(Array.isArray(n)?t(n):n),[])}(T(t,2).map(t=>N(...t)));let[e,n]=t;if(I(n)&&([e,n]=[n,e]),I(e)){return[...V(n)?e.points.filter(t=>n.contains(t)):[],...N(n,...e.edges)]}return function(t,e){let n=[];V(t)&&V(e)?n=function(t,e){const n=t.p1.x-t.p2.x,r=t.p1.y-t.p2.y,i=e.p1.x-e.p2.x,o=e.p1.y-e.p2.y,s=n*o-r*i;if(y(s,0))return[];const a=t.p1.x*t.p2.y-t.p1.y*t.p2.x,c=e.p1.x*e.p2.y-e.p1.y*e.p2.x;return[new k((a*i-n*c)/s,(a*o-r*c)/s)]}(t,e):V(t)&&O(e)?n=P(t,e):O(t)&&V(e)?n=P(e,t):O(t)&&O(e)&&(n=function(t,e){const n=k.distance(t.c,e.c);if(n>t.r+e.r)return[];if(n<Math.abs(t.r-e.r))return[];if(y(n,0)&&y(t.r,e.r))return[];if(y(n,t.r+e.r))return[new $(t.c,e.c).midpoint];const r=(M(t.r)-M(e.r)+M(n))/(2*n),i=Math.sqrt(M(t.r)-M(r)),o=(e.c.x-t.c.x)*r/n+(e.c.y-t.c.y)*i/n+t.c.x,s=(e.c.y-t.c.y)*r/n-(e.c.x-t.c.x)*i/n+t.c.y,a=(e.c.x-t.c.x)*r/n-(e.c.y-t.c.y)*i/n+t.c.x,c=(e.c.y-t.c.y)*r/n+(e.c.x-t.c.x)*i/n+t.c.y;return[new k(o,s),new k(a,c)]}(t,e));for(const r of[t,e])"segment"===r.type&&(n=n.filter(t=>E(r,t))),"ray"===r.type&&(n=n.filter(t=>S(r,t)));return n}(e,n)}var q,H,W;!function(t){function e(t,e,n){return function(t,e,n){const r=[];for(let i=0;i<e;++i)r.push(o(t,n));return r}(t,e,n)}function n(t=2){const n=e(0,t,t);for(let e=0;e<t;++e)n[e][e]=1;return n}t.fill=e,t.identity=n,t.rotation=function(t){const e=Math.sin(t),n=Math.cos(t);return[[n,-e],[e,n]]},t.shear=function(t){return[[1,t],[0,1]]},t.reflection=function(t){const e=Math.sin(2*t),n=Math.cos(2*t);return[[n,e],[e,-n]]},t.sum=function t(...e){const[n,...r]=e,i=r.length>1?t(...r):r[0];if(n.length!==i.length||n[0].length!==i[0].length)throw new Error("Matrix sizes don’t match");const o=[];for(let t=0;t<n.length;++t){const e=[];for(let r=0;r<n[t].length;++r)e.push(n[t][r]+i[t][r]);o.push(e)}return o},t.scalarProduct=function(t,e){return t.map(t=>t.map((t,n)=>t*e))},t.product=function t(...e){let[n,...r]=e,i=r.length>1?t(...r):r[0];if(n[0].length!==i.length)throw new Error("Matrix sizes don’t match.");let o=[];for(let t=0;t<n.length;++t){let e=[];for(let r=0;r<i[0].length;++r){let o=0;for(let e=0;e<i.length;++e)o+=n[t][e]*i[e][r];e.push(o)}o.push(e)}return o},t.transpose=function(t){let e=[];for(let n=0;n<t[0].length;++n){let r=[];for(let e=0;e<t.length;++e)r.push(t[e][n]);e.push(r)}return e},t.determinant=function(t){if(t.length!==t[0].length)throw new Error("Not a square matrix.");let e=t.length;if(1===e)return t[0][0];if(2===e)return t[0][0]*t[1][1]-t[0][1]*t[1][0];let n=0;for(let r=0;r<e;++r){let i=t[0][r],o=t[0][r];for(let n=1;n<e;++n)o*=t[n][r+n%e],i*=t[n][r-n%e];n+=o-i}return n},t.inverse=function(t){let e=t.length;if(e!==t[0].length)throw new Error("Not a square matrix.");let r=n(e),i=function(t,e,n){const r=[];for(let i=0;i<e;++i){const e=[];for(let r=0;r<n;++r)e.push(t(i,r));r.push(e)}return r}((e,n)=>t[e][n],e,e);for(let t=0;t<e;++t){let n=i[t][t];if(!n){for(let n=t+1;n<e;++n)if(0!==i[n][t]){for(let o=0;o<e;++o)[i[n][o],i[t][o]]=[i[t][o],i[n][o]],[r[n][o],r[t][o]]=[r[t][o],r[n][o]];break}if(!(n=i[t][t]))throw new Error("Matrix not invertible.")}for(let o=0;o<e;++o)i[t][o]=i[t][o]/n,r[t][o]=r[t][o]/n;for(let n=0;n<e;++n){if(n===t)continue;let o=i[n][t];for(let s=0;s<e;++s)i[n][s]-=o*i[t][s],r[n][s]-=o*r[t][s]}}return r}}(q||(q={})),function(t){function e(t){for(let e=(t=t.slice(0)).length-1;e>0;--e){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function n(t){const e=Math.random()*a(t);let n=0;return t.findIndex(t=>(n+=t)>=e)}t.shuffle=e,t.integer=function(t,e){let n=void 0===e?t:e-t+1;return(void 0===e?0:t)+Math.floor(n*Math.random())},t.intArray=function(t){let n=[];for(let e=0;e<t;++e)n.push(e);return e(n)},t.weighted=n;const r=new Map;function i(t=.5){return Math.random()<t?1:0}t.smart=function(t,e){e||(e=function(t=10){return Math.random().toString(36).substr(2,t)}()),r.has(e)||r.set(e,o(1,t));const i=r.get(e),s=n(i.map(t=>t*t));return i[s]-=1,i[s]<=0&&r.set(e,i.map(t=>t+1)),s},t.bernoulli=i,t.binomial=function(t=1,e=.5){let n=0;for(let r=0;r<t;++r)n+=i(e);return n},t.poisson=function(t=1){if(t<=0)return 0;const e=Math.exp(-t);let n=1,r=0;for(;n>e;++r)n*=Math.random();return r-1},t.uniform=function(t=0,e=1){return t+(e-t)*Math.random()},t.normal=function(t=0,e=1){const n=Math.random(),r=Math.random();return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r)*Math.sqrt(e)+t},t.exponential=function(t=1){return t<=0?0:-Math.log(Math.random())/t},t.geometric=function(t=.5){if(!(t<=0||t>1))return Math.floor(Math.log(Math.random())/Math.log(1-t))},t.cauchy=function(){let t,e,n;do{t=(e=2*Math.random()-1)*e+(n=2*Math.random()-1)*n}while(t>=1);return e/n},t.normalPDF=function(t,e=1,n=0){return Math.exp(-((t-e)**2)/(2*n))/Math.sqrt(2*Math.PI*n)};const s=7,c=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];function l(t,e,n,r=1){let i=0;for(let o=e;o<n;o+=r)i+=t(o)*r||0;return i}t.integrate=l,t.chiCDF=function(t,e){return 1-l(t=>Math.pow(t,(e-2)/2)*Math.exp(-t/2),0,t)/Math.pow(2,e/2)/function t(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));e-=1;let n=c[0];for(let t=1;t<s+2;t++)n+=c[t]/(e+t);let r=e+s+.5;return Math.sqrt(2*Math.PI)*Math.pow(r,e+.5)*Math.exp(-r)*n}(e/2)}}(H||(H={})),function(t){function e(t,e=!1){let n=0,r=0,i=0,o=0;const s=t.length;for(let e=0;e<s;e++)n+=t[e][0],r+=t[e][1],i+=t[e][0]*t[e][0],o+=t[e][0]*t[e][1];if(e){return[0,o/i]}const a=(s*o-n*r)/(s*i-n*n);return[r/s-a*n/s,a]}function n(t){const e=[0,0,0,0,0,0];for(const n of t)e[0]+=n[0],e[1]+=n[1],e[2]+=n[0]*n[0]*n[1],e[3]+=n[1]*Math.log(n[1]),e[4]+=n[0]*n[1]*Math.log(n[1]),e[5]+=n[0]*n[1];const n=e[1]*e[2]-e[5]*e[5];return[Math.exp((e[2]*e[3]-e[5]*e[4])/n),(e[1]*e[4]-e[5]*e[3])/n]}function r(t,e=2){let n=t.map(t=>(function(t,e,n=1){const r=[];if(void 0===e&&t>=0)for(let e=0;e<t;e+=n)r.push(e);else if(void 0===e)for(let e=0;e>t;e-=n)r.push(e);else if(t<=e)for(let i=t;i<=e;i+=n)r.push(i);else for(let i=t;i>=e;i-=n)r.push(i);return r})(e+1).map(e=>Math.pow(t[0],e))),r=q.transpose(n),i=t.map(t=>[t[1]]),o=q.product(r,n),s=q.inverse(o);return q.product(s,r,i).map(t=>t[0])}function i(t,e){let n=t.reduce((t,e)=>t+e[1],0)/t.length,r=t.reduce((t,e)=>t+(e[1]-n)**2,0);return 1-t.reduce((t,n)=>t+(n[1]-e(n[0]))**2,0)/r}t.linear=e,t.exponential=n,t.logarithmic=function(t){const e=[0,0,0,0],n=t.length;for(const n of t)e[0]+=Math.log(n[0]),e[1]+=n[1]*Math.log(n[0]),e[2]+=n[1],e[3]+=Math.pow(Math.log(n[0]),2);const r=(n*e[1]-e[2]*e[0])/(n*e[3]-e[0]*e[0]);return[(e[2]-r*e[0])/n,r]},t.power=function(t){const e=[0,0,0,0],n=t.length;for(const n of t)e[0]+=Math.log(n[0]),e[1]+=Math.log(n[1])*Math.log(n[0]),e[2]+=Math.log(n[1]),e[3]+=Math.pow(Math.log(n[0]),2);const r=(n*e[1]-e[2]*e[0])/(n*e[3]-e[0]*e[0]);return[Math.exp((e[2]-r*e[0])/n),r]},t.polynomial=r,t.coefficient=i;const o=[{name:"linear",regression:e,fn:(t,e)=>t[0]+e*t[1]},{name:"quadratic",regression:r,fn:(t,e)=>t[0]+e*t[1]+e*e*t[2]},{name:"cubic",regression:t=>r(t,3),fn:(t,e)=>t[0]+e*t[1]+e*e*t[2]+e*e*e*t[3]},{name:"exponential",regression:n,fn:(t,e)=>t[0]*Math.pow(Math.E,t[1]*e)}];t.find=function(t,e=.9){if(t.length>1)for(const n of o){const r=n.regression(t),o=n.fn.bind(void 0,r),s=i(t,o);if(s>e)return{type:n.name,fn:o,params:r,coeff:s}}return{type:void 0,fn:()=>{},params:[],coeff:void 0}}}(W||(W={}));const R="ontouchstart"in window,j="onpointerdown"in window;function F(t){if(t.touches){const e=t.targetTouches.length?t.targetTouches:t.changedTouches;return new k(e[0].clientX,e[0].clientY)}return new k(t.clientX,t.clientY)}let B;function z(t){for(const e of t){const t=e.isIntersecting?"enterViewport":"exitViewport";setTimeout(()=>mt(e.target).trigger(t))}}function X(t){if(!t._data.intersectionEvents)if(t._data.intersectionEvents=!0,window.IntersectionObserver)B||(B=new IntersectionObserver(z)),B.observe(t._el);else{let e=!1;yt.on("scroll",()=>{const n=t.isInViewport;e&&!n?(t.trigger("exitViewport"),e=!1):n&&!e&&(t.trigger("enterViewport"),e=!0)})}}function D(t){if(t._data.pointerPositionEvents)return;t._data.pointerPositionEvents=!0;const e=t.parent;let n=void 0;e.on("pointerend",()=>n=void 0),e.on("pointermove",e=>{const r=n,i=function(t){if(t instanceof PointerEvent&&"mouse"===t.pointerType)return mt(t.target);const e=F(t);return mt(document.elementFromPoint(e.x,e.y)||void 0)}(e);n=i.equals(t)||i.hasParent(t),null!=r&&n&&!r&&t.trigger("pointerenter",e),!n&&r&&t.trigger("pointerleave",e)})}function G(t,e){e._events["_"+t]||(e._events["_"+t]=!0,j?e.on(t.replace("mouse","pointer"),n=>{"mouse"===n.pointerType&&e.trigger(t,n)}):R||e._el.addEventListener(t,n=>e.trigger(t,n)))}const Y={change:"propertychange keyup input paste",scrollwheel:"DOMMouseScroll mousewheel",pointerdown:j?"pointerdown":R?"touchstart":"mousedown",pointermove:j?"pointermove":R?"touchmove":"mousemove",pointerup:j?"pointerup":R?"touchend":"mouseup",pointercancel:j?"pointercancel":"touchcancel",pointerstop:j?"pointerup pointercancel":R?"touchend touchcancel":"mouseup"},K={scroll:function(t){if(t._data.scrollEvents)return;t._data.scrollEvents=!0;let e=!1,n=void 0;function r(){const i=t.scrollTop;i!==n?(n=i,t.trigger("scroll",{top:n}),window.requestAnimationFrame(r)):e=!1}function i(){e||window.requestAnimationFrame(r),e=!0}function o(){window.removeEventListener("touchmove",i),window.removeEventListener("touchend",o)}("window"===t.type?window:t._el).addEventListener("scroll",i),t._el.addEventListener("touchstart",(function(t){t.handled||(window.addEventListener("touchmove",i),window.addEventListener("touchend",o))}))},tap:function(t){if(t._data.tapEvent)return;t._data.tapEvent=!0;let e=void 0;t.on("pointerdown",t=>e=F(t)),t.on("pointerup",n=>{if(!e)return;const r=F(n);k.distance(e,r)<6&&t.trigger("tap",n),e=void 0}),t.on("pointercancel",()=>e=void 0)},clickOutside:function(t){t._data.clickOutsideEvent||(t._data.clickOutsideEvent=!0,yt.on("pointerdown",e=>{const n=mt(e.target);n&&(n.equals(t)||n.hasParent(t))||t.trigger("clickOutside",e)}))},key:function(t){t.on("keydown",e=>{if(e.metaKey||e.ctrlKey)return;if(_t.isAndroid&&229===e.keyCode)return;const n=(e.key||String.fromCharCode(e.which)).toLowerCase();t.trigger("key",{code:e.keyCode,key:n})}),_t.isAndroid&&"input"===t.type&&t.on("input",e=>{const n=e.data[e.data.length-1].toLowerCase();t.trigger("key",{code:void 0,key:n}),t.value=""})},mousedown:G.bind(void 0,"mousedown"),mousemove:G.bind(void 0,"mousemove"),mouseup:G.bind(void 0,"mouseup"),pointerenter:D,pointerleave:D,enterViewport:X,exitViewport:X};function U(t,e,n,r){if(e in Y){const i=c(Y[e]);for(const e of i)t._el.addEventListener(e,n,r)}else e in K?K[e](t):t._el.addEventListener(e,n,r)}function J(t,e,n){if(e in Y){const r=c(Y[e]);for(const e of r)t._el.removeEventListener(e,n)}else e in K||t._el.removeEventListener(e,n)}function Z(t,e,n){const r=e.x*(n.y-t.y)+t.x*(e.y-n.y)+n.x*(t.y-e.y)>0?1:0,i=k.distance(e,t);return[t.x,t.y+"A"+i,i,0,r,1,n.x,n.y].join(",")}function Q(t,e={}){let n=t.a;const r=t.b;let i=t.c;const o=e.size||function(t,e={}){return t.isRight&&!e.round?20:24+20*(1-_(t.rad,0,Math.PI)/Math.PI)}(t,e),s=k.difference(n,r).unitVector,a=k.difference(i,r).unitVector;n=k.sum(r,s.scale(o)),i=k.sum(r,a.scale(o));let c=e.fill?`M${r.x},${r.y}L`:"M";if(t.isRight&&!e.round){const t=k.sum(n,a.scale(o));c+=`${n.x},${n.y}L${t.x},${t.y}L${i.x},${i.y}`}else c+=Z(n,r,i);return e.fill&&(c+="Z"),c}function tt(...t){return"M"+t.map(t=>t.x+","+t.y).join("L")}function et(t,e){const n=t.perpendicularVector.scale(6),r=t.unitVector.scale(3),i=t.midpoint;switch(e){case"bar":return tt(i.add(n),i.add(n.inverse));case"bar2":return tt(i.add(r).add(n),i.add(r).add(n.inverse))+tt(i.add(r.inverse).add(n),i.add(r.inverse).add(n.inverse));case"arrow":return tt(i.add(r.inverse).add(n),i.add(r),i.add(r.inverse).add(n.inverse));case"arrow2":return tt(i.add(r.scale(-2)).add(n),i,i.add(r.scale(-2)).add(n.inverse))+tt(i.add(n),i.add(r.scale(2)),i.add(n.inverse));default:return""}}function nt(t,e){if(!t||!e)return"";const n=e.perpendicular,r=t.add(e.scale(9)).add(n.scale(9)),i=t.add(e.scale(9)).add(n.scale(-9));return tt(r,t,i)}function rt(e,n={}){if("angle"===e.type)return Q(e=e,n);if("segment"===e.type){if((e=e).p1.equals(e.p2))return"";let r=tt(e.p1,e.p2);return n.mark&&(r+=et(e,n.mark)),n.arrows&&(r+=function(e,n){let r="";return t(n,"start","both")&&(r+=nt(e.p1,e.unitVector)),t(n,"end","both")&&(r+=nt(e.p2,e.unitVector.inverse)),r}(e,n.arrows)),r}if("ray"===e.type){if(e=e,!n.box)return"";const t=N(e,n.box)[0];return t?tt(e.p1,t):""}if("line"===e.type){if(e=e,!n.box)return"";const t=N(e,n.box);if(t.length<2)return"";let r=tt(t[0],t[1]);return n.mark&&(r+=et(e,n.mark)),r}if("circle"===e.type)return`M ${(e=e).c.x-e.r} ${e.c.y} a ${e.r},${e.r} 0 1 0 `+`${2*e.r} 0 a ${e.r} ${e.r} 0 1 0 ${-2*e.r} 0`;if("arc"===e.type){let r="M"+Z((e=e).start,e.c,e.end);return n.arrows&&(r+=function(e,n){let r="";if(t(n,"start","both")){const t=new $(e.c,e.start).perpendicularVector.inverse;r+=nt(e.start,t)}if(t(n,"end","both")){const t=new $(e.c,e.end).perpendicularVector;r+=nt(e.end,t)}return r}(e,n.arrows)),r}return"sector"===e.type?`M ${(e=e).c.x} ${e.c.y} L ${Z(e.start,e.c,e.end)} Z`:"polyline"===e.type?tt(...(e=e).points):"polygon"===e.type||"triangle"===e.type?tt(...(e=e).points)+"Z":"rectangle"===e.type?tt(...(e=e).polygon.points)+"Z":""}const it="zyxwvutsrqponmlkjihgfedcba";function ot(t,e,n,r=n){if(n[e].indexOf("${")<0)return;const i=function(t,e=!0){let n=t.replace(/×/g,"*");e&&(n='"'+(n=n.replace(/"/g,'"').replace(/\${([^}]+)}/g,(t,e)=>`" + (${e}) + "`))+'"');try{return new Function("_vars",`try {\n      with(_vars) { return ${n} }\n    } catch(_error) {\n      if (!(_error instanceof ReferenceError)) console.warn(_error);\n      return "";\n    }`)}catch(e){return console.warn("WHILE PARSING: ",t,"\n",e),()=>void 0}}(n[e]);t.watch(()=>r[e]=i(t)||""),r[e]=i(t)||""}class st{constructor(t){this._el=t,this._data={},this._events={},this.type="default",t._view=this}get id(){return this._el.id}get data(){return this._el.dataset}get tagName(){return this._el.tagName.toUpperCase()}equals(t){return this._el===t._el}getModel(){const t=this.parent;return t?t.model||t.getModel():function(t={}){const e=[],n={};let r=1,i=it.split("").map(t=>"_"+t);function s(e,r){n[e]=r,e in t||Object.defineProperty(t,e,{get:()=>n[e],set(r){n[e]=r,t.update()}})}for(const e of Object.keys(t))s(e,t[e]);return t.update=()=>{for(const t of e)t(n)},t.watch=(t,r)=>{e.push(t),r||t(n)},t.set=(e,r)=>{n[e]!==r&&(s(e,r),t.update())},t.assign=e=>{for(const t of Object.keys(e))s(t,e[t]);t.update()},t.name=()=>(i.length||(r+=1,i=it.split("").map(t=>o("_",r)+t)),i.pop()),t}()}bindObservable(t,e=!0){return function t(e,n,r=!0){for(const t of e.attributes){const r=t.name.startsWith("x-")?document.createAttribute(t.name.slice(2)):t;ot(n,"value",t,r),r!==t&&e._el.setAttributeNode(r)}if(e.children.length)for(const i of e.childNodes)i instanceof Text?ot(n,"textContent",i):r&&t(i,n);else e.html.trim()&&ot(n,"html",e)}(this,t,e),this.model=t,t}addClass(t){for(const e of c(t))this._el.classList.add(e)}removeClass(t){for(const e of c(t))this._el.classList.remove(e)}hasClass(t){return this._el.classList.contains(t)}toggleClass(t){return this._el.classList.toggle(t)}setClass(t,e){e?this.addClass(t):this.removeClass(t)}attr(t){return this._el.getAttribute(t)||""}hasAttr(t){return this._el.hasAttribute(t)}setAttr(t,e){this._el.setAttribute(t,e.toString())}removeAttr(t){this._el.removeAttribute(t)}get attributes(){return Array.from(this._el.attributes||[])}get html(){return this._el.innerHTML||""}set html(t){this._el.innerHTML=t}set htmlStr(t){this._el.textContent=""+t}get text(){return this._el.textContent||""}set text(t){this._el.textContent=t}set textStr(t){this._el.textContent=""+t}blur(){this._el.blur()}focus(){this._el.focus()}get bounds(){return this._el.getBoundingClientRect()}get isInViewport(){if(0===this.height)return!1;const t=this.bounds;return v(t.top,-t.height,_t.height)}get topLeftPosition(){const t=this.bounds;return new k(t.left,t.top)}get boxCenter(){const t=this.bounds;return new k(t.left+t.width/2,t.top+t.height/2)}get scrollWidth(){return this._el.scrollWidth}get scrollHeight(){return this._el.scrollHeight}get scrollTop(){return this._el.scrollTop}get scrollLeft(){return this._el.scrollLeft}set scrollTop(t){this._el.scrollTop=t,this.trigger("scroll",{top:t,left:this.scrollLeft})}set scrollLeft(t){this._el.scrollLeft=t,this.trigger("scroll",{top:this.scrollTop,left:t})}scrollTo(t,e=1e3,r="cubic"){t<0&&(t=0);const i=this.scrollTop,o=t-i;this._data.scrollAnimation&&this._data.scrollAnimation.cancel(),this._data.scrollAnimation=function(t,e){if(0===e)return t(1,0,()=>{}),Lt;const r=Date.now(),i=n();let o=0,s=!0;const a=()=>{s=!1,i.reject()};return function n(){s&&(!e||o<=e)&&window.requestAnimationFrame(n);const c=Date.now()-r;t(e?Math.min(1,c/e):c,c-o,a),e&&c>=e&&i.resolve();o=c}(),{cancel:a,promise:i.promise}}(t=>{const e=i+o*function(t,e=0,n=0){if(0===e)return 0;if(1===e)return 1;const[r,i]=t.split("-");return"in"===i?$t(r,e,n):"out"===i?1-$t(r,1-e,n):e<=.5?$t(r,2*e,n)/2:1-$t(r,2*(1-e),n)/2}(r,t);this.scrollTop=e,this.trigger("scroll",{top:e})},e)}scrollBy(t,e=1e3,n="cubic"){t&&this.scrollTo(this.scrollTop+t,e,n)}css(t,e){if(void 0===e){if("string"==typeof t)return window.getComputedStyle(this._el).getPropertyValue(t);{const e=Object.keys(t);for(const n of e)this._el.style.setProperty(n,""+t[n])}}else"string"==typeof t&&this._el.style.setProperty(t,""+e)}get transform(){return this.css("transform").replace("none","")}get transformMatrix(){const t=this.transform;if(!t)return[[1,0,0],[0,1,0]];const e=t.match(/matrix\(([0-9,.\s\-]*)\)/);if(!e||!e[1])return[[1,0,0],[0,1,0]];const n=e[1].split(",");return[[+n[0],+n[2],+n[4]],[+n[1],+n[3],+n[5]]]}get scale(){const t=this.transformMatrix;return[t[0][0],t[1][1]]}setTransform(t,e=0,n=1){let r="";t&&(r+=`translate(${x(t.x,.1)}px,${x(t.y,.1)}px)`),e&&(r+=` rotate(${e}rad)`),n&&(r+=` scale(${n})`),this._el.style.transform=r}translate(t,e){this.setTransform(new k(t,e))}show(){this.hasAttr("hidden")&&this.removeAttr("hidden"),"visibility"===this.data.display?this._el.style.visibility="visible":this._el.style.display=this.data.display||"block"}hide(){"visibility"===this.data.display?this._el.style.visibility="hidden":this._el.style.display="none"}toggle(t){t?this.show():this.hide()}is(t){return this._el.matches?this._el.matches(t):Array.from(document.querySelectorAll(t)).includes(this._el)}index(){let t=0,e=this._el;for(;void 0!==(e=e.previousSibling||void 0);)++t;return t}prepend(t){const e=this._el.childNodes;e.length?this._el.insertBefore(t._el,e[0]):this._el.appendChild(t._el)}append(t){this._el.appendChild(t._el)}insertBefore(t){this.parent._el.insertBefore(t._el,this._el)}insertAfter(t){const e=this._el.nextSibling;e?this.parent._el.insertBefore(t._el,e):this.parent._el.appendChild(t._el)}get next(){return mt(this._el.nextSibling)}get prev(){return mt(this._el.previousSibling)}$(t){return mt(t,this)}$$(t){return function(t,e){const n=e?e._el:document.documentElement,r=t?n.querySelectorAll(t):[];return Array.from(r,t=>mt(t))}(t,this)}get parent(){return mt(this._el.parentElement||void 0)}parents(t){const e=[];let n=this.parent;for(;n;)t&&!n.is(t)||e.push(n),n=n.parent;return e}hasParent(...e){const n=e.map(t=>t._el);let r=this._el.parentNode;for(;r;){if(t(r,...n))return!0;r=r.parentNode}return!1}get children(){return Array.from(this._el.children||[],t=>mt(t))}get childNodes(){return Array.from(this._el.childNodes,t=>t instanceof Text?t:mt(t))}remove(){this._el&&this._el.parentNode&&this._el.parentNode.removeChild(this._el)}removeChildren(){for(;this._el.firstChild;)this._el.removeChild(this._el.firstChild)}on(t,e,n){for(const r of c(t))r in this._events?this._events[r].includes(e)||this._events[r].push(e):this._events[r]=[e],U(this,r,e,n)}one(t,e,n){const r=n=>{this.off(t,r),e(n)};this.on(t,r,n)}off(t,e){for(const n of c(t))n in this._events&&(this._events[n]=this._events[n].filter(t=>t!==e)),J(this,n,e)}trigger(t,e={}){for(const n of c(t)){if(!this._events[n])return;for(const t of this._events[n])t.call(this,e)}}onKeyDown(t,e){const n=c(t).map(t=>xt[t]||t);this._el.addEventListener("keydown",t=>{n.indexOf(t.keyCode)>=0&&e(t)})}animate(t,e=400,n=0,r="ease-in-out"){return Et(this,t,e,n,r)}enter(t="fade",e=500,n=0){return function(t,e="fade",n=500,r=0){if(t.show(),!kt)return Lt;if("fade"===e)return Et(t,{opacity:[0,1]},n,r);if("pop"===e){const e=t.transform.replace(/scale\([0-9.]*\)/,"").replace(St,"translate($1px,$2px)");return Et(t,{opacity:[0,1]},n,r),Et(t,{transform:[e+" scale(0.5)",e+" scale(1)"]},n,r,"bounce-in")}if("descend"===e){return Et(t,{opacity:[0,1],transform:["translateY(-50%)","none"]},n,r)}if(e.startsWith("draw")){const i=t.strokeLength;t.css({opacity:1,"stroke-dasharray":i+"px"});const o=Et(t,{"stroke-dashoffset":[i+"px","draw-reverse"===e?2*i+"px":0]},n,r,"linear");return o.promise.then(()=>t.css("stroke-dasharray","")),o}if(e.startsWith("slide")){const i={opacity:[0,1],transform:["translateY(50px)","none"]};return e.includes("down")&&(i.transform[0]="translateY(-50px)"),Et(t,i,n,r)}if(e.startsWith("reveal")){const i={opacity:[0,1],height:[0,"auto"]};return e.includes("left")&&(i.transform=["translateX(-50%)","none"]),e.includes("right")&&(i.transform=["translateX(50%)","none"]),Et(t,i,n,r)}return Lt}(this,t,e,n)}exit(t="fade",e=500,n=0,r=!1){return function(t,e="fade",n=400,r=0,i=!1){if(!t._el)return Lt;if(!kt)return t.hide(),Lt;if("none"===t.css("display"))return Lt;let o;if("fade"===e)o=Et(t,{opacity:[1,0]},n,r);else if("pop"===e){const e=t.transform.replace(/scale\([0-9.]*\)/,"");Et(t,{opacity:[1,0]},n,r),o=Et(t,{transform:[e+" scale(1)",e+" scale(0.5)"]},n,r,"bounce-out")}else if("ascend"===e){o=Et(t,{opacity:[1,0],transform:["none","translateY(-50%)"]},n,r)}else if(e.startsWith("draw")){const i=t.strokeLength;t.css("stroke-dasharray",i),o=Et(t,{"stroke-dashoffset":["draw-reverse"===e?2*i+"px":0,i+"px"]},n,r,"linear")}else if(e.startsWith("slide")){const i={opacity:0,transform:"translateY(50px)"};e.includes("up")&&(i.transform="translateY(-50px)"),o=Et(t,i,n,r)}else if(e.startsWith("reveal")){const i={opacity:0,height:0};e.includes("left")&&(i.transform="translateX(-50%)"),e.includes("right")&&(i.transform="translateX(50%)"),o=Et(t,i,n,r)}return o.promise.then(()=>i?t.remove():t.hide()),o}(this,t,e,n,r)}effect(t){this.one("animationend",()=>this.removeClass("effects-"+t)),this.addClass("effects-"+t)}copy(t=!0,e=!0){const n=mt(this._el.cloneNode(t));return e&&n.copyInlineStyles(this,t),n}copyInlineStyles(t,e=!0){const n=window.getComputedStyle(t._el);for(const t of Array.from(n))this.css(t,n.getPropertyValue(t));if(e){const e=this.children,n=t.children;for(let t=0;t<e.length;++t)e[t].copyInlineStyles(n[t],!0)}}}class at extends st{get offsetTop(){return this._el.offsetTop}get offsetLeft(){return this._el.offsetLeft}get offsetParent(){return mt(this._el.offsetParent||void 0)}get width(){return this._el.offsetWidth}get height(){return this._el.offsetHeight}get innerWidth(){const t=parseFloat(this.css("padding-left")),e=parseFloat(this.css("padding-right"));return this._el.clientWidth-t-e}get innerHeight(){const t=parseFloat(this.css("padding-bottom")),e=parseFloat(this.css("padding-top"));return this._el.clientHeight-t-e}get outerWidth(){const t=parseFloat(this.css("margin-left")),e=parseFloat(this.css("margin-right"));return this.width+t+e}get outerHeight(){const t=parseFloat(this.css("margin-bottom")),e=parseFloat(this.css("margin-top"));return this.height+t+e}get positionTop(){let t=this._el,e=0;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e}get positionLeft(){let t=this._el,e=0;for(;t;)e+=t.offsetLeft,t=t.offsetParent;return e}offset(t){if(t._el===this._el.offsetParent){const e=this.offsetTop+t._el.clientTop,n=this.offsetLeft+t._el.clientLeft;return{top:e,left:n,bottom:e+this.height,right:n+this.width}}{const e=t._el.getBoundingClientRect(),n=this._el.getBoundingClientRect();return{top:n.top-e.top,left:n.left-e.left,bottom:n.bottom-e.top,right:n.right-e.left}}}}class ct extends st{constructor(){super(...arguments),this.type="svg"}get $ownerSVG(){return mt(this._el.ownerSVGElement||void 0)}get width(){return this.bounds.width}get height(){return this.bounds.height}get positionLeft(){const t=this._el.getBBox().x+this._el.getCTM().e;return this.$ownerSVG.positionLeft+t}get positionTop(){const t=this._el.getBBox().y+this._el.getCTM().f;return this.$ownerSVG.positionTop+t}get inverseTransformMatrix(){const t=this._el.getScreenCTM().inverse(),e=[[t.a,t.c,t.e],[t.b,t.d,t.f]];if(_t.isFirefox){const t=this.transformMatrix;e[0][2]-=t[0][2],e[1][2]-=t[1][2]}return e}setTransform(t,e=0,n=1){const r=t?`translate(${x(t.x,.1)} ${x(t.y,.1)})`:"",i=e?`rotate(${180*e/Math.PI})`:"",o=n?`scale(${n})`:"";this.setAttr("transform",[r,i,o].join(" "))}get strokeLength(){if(this._el instanceof SVGGeometryElement)return this._el.getTotalLength();{const t=this.bounds;return 2*t.height+2*t.width}}getPointAt(t){if(this._el instanceof SVGGeometryElement){const e=this._el.getPointAtLength(t*this.strokeLength);return new k(e.x,e.y)}return new k(0,0)}get points(){const t=this.attr("d");return t?t.replace(/[MZ]/g,"").split(/[LA]/).map(t=>{const e=t.split(",");return new k(+s(e,1),+s(e))}):[]}set points(t){const e=t.length?"M"+t.map(t=>t.x+","+t.y).join("L"):"";this.setAttr("d",e)}addPoint(t){const e=this.attr("d")+" L "+t.x+","+t.y;this.setAttr("d",e)}get center(){const t=+this.attr("TEXT"===this.tagName?"x":"cx"),e=+this.attr("TEXT"===this.tagName?"y":"cy");return new k(t,e)}setCenter(t){this.setAttr("TEXT"===this.tagName?"x":"cx",t.x),this.setAttr("TEXT"===this.tagName?"y":"cy",t.y)}setLine(t,e){this.setAttr("x1",t.x),this.setAttr("y1",t.y),this.setAttr("x2",e.x),this.setAttr("y2",e.y)}setRect(t){this.setAttr("x",t.p.x),this.setAttr("y",t.p.y),this.setAttr("width",t.w),this.setAttr("height",t.h)}draw(t,e={}){const n={mark:this.attr("mark"),arrows:this.attr("arrows"),size:+this.attr("size")||void 0,fill:this.hasClass("fill"),round:this.hasAttr("round")};this.setAttr("d",rt(t,function(t,e){for(let n of Object.keys(e))t.hasOwnProperty(n)||(t[n]=e[n]);return t}(e,n)))}}class lt extends ct{get viewBox(){return this._el.viewBox.baseVal||{width:0,height:0}}get $ownerSVG(){return this}get positionLeft(){return parseInt(this.css("margin-left"))+this.parent.positionLeft}get positionTop(){return parseInt(this.css("margin-top"))+this.parent.positionTop}get svgWidth(){return this.viewBox.width||this.width}get svgHeight(){return this.viewBox.height||this.height}pngImage(t){return m(this,void 0,void 0,(function*(){const e=this.copy(!0,!0),n=t||this.svgWidth,r=t||this.svgHeight;e.setAttr("width",n),e.setAttr("height",r);const i=(new XMLSerializer).serializeToString(e._el);let o="data:image/svg+xml;utf8,"+encodeURIComponent(i);o=o.replace("svg ",'svg xmlns="http://www.w3.org/2000/svg" ');const s=wt("canvas",{width:n,height:r});s.ctx.fillStyle="#fff",s.ctx.fillRect(0,0,n,r);const a=yield function(t){return new Promise(e=>{const n=new Image;n.onload=()=>e(n),n.src=t})}(o);return s.ctx.drawImage(a,0,0,n,r),s.pngImage}))}}class ht extends at{constructor(){super(...arguments),this.type="window"}get width(){return window.innerWidth}get height(){return window.innerHeight}get innerWidth(){return window.innerWidth}get innerHeight(){return window.innerHeight}get outerWidth(){return window.outerWidth}get outerHeight(){return window.outerHeight}get scrollWidth(){return document.body.scrollWidth}get scrollHeight(){return document.body.scrollHeight}get scrollTop(){return window.pageYOffset}get scrollLeft(){return window.pageXOffset}set scrollTop(t){document.body.scrollTop=document.documentElement.scrollTop=t,this.trigger("scroll",{top:t,left:this.scrollLeft})}set scrollLeft(t){document.body.scrollLeft=document.documentElement.scrollLeft=t,this.trigger("scroll",{top:this.scrollTop,left:t})}}class ut extends at{constructor(){super(...arguments),this.type="form"}get action(){return this._el.action}get formData(){const t={};for(const e of Array.from(this._el.elements)){const n=e.name||e.id;n&&(t[n]=e.value)}return t}get isValid(){return this._el.checkValidity()}}class dt extends at{constructor(){super(...arguments),this.type="input"}get checked(){return this._el instanceof HTMLInputElement&&this._el.checked}get value(){return this._el.value}set value(t){this._el.value=t}change(t){let e="";this.on("change",()=>{this.value!==e&&(e=this.value.trim(),t(e))})}validate(t){this.change(e=>this.setValidity(t(e)))}setValidity(t){this._el.setCustomValidity(t)}get isValid(){return this._el.checkValidity()}}class ft extends at{constructor(){super(...arguments),this.type="canvas"}getContext(t="2d",e={}){return this._el.getContext(t,e)}get pngImage(){return this._el.toDataURL("image/png")}get canvasWidth(){return this._el.width}get canvasHeight(){return this._el.height}get ctx(){return this._ctx||(this._ctx=this.getContext()),this._ctx}draw(t,e={}){this.ctx.save(),function(t,e,n={}){if(n.fill&&(t.fillStyle=n.fill),n.opacity&&(t.globalAlpha=n.opacity),n.stroke&&(t.strokeStyle=n.stroke,t.lineWidth=n.strokeWidth||1,n.lineCap&&(t.lineCap=n.lineCap),n.lineJoin&&(t.lineJoin=n.lineJoin)),t.beginPath(),"segment"===e.type)e=e,t.moveTo(e.p1.x,e.p1.y),t.lineTo(e.p2.x,e.p2.y);else if("circle"===e.type)e=e,t.arc(e.c.x,e.c.y,e.r,0,2*Math.PI);else if("polygon"===e.type||"triangle"===e.type){e=e,t.moveTo(e.points[0].x,e.points[0].y);for(const n of e.points.slice(1))t.lineTo(n.x,n.y);t.closePath()}else if("polyline"===e.type){e=e,t.moveTo(e.points[0].x,e.points[0].y);for(const n of e.points.slice(1))t.lineTo(n.x,n.y)}n.fill&&t.fill(),n.stroke&&t.stroke()}(this.ctx,t,e),this.ctx.restore()}clear(){this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight)}}class pt extends at{play(){return this._el.play()||Promise.resolve()}pause(){return this._el.pause()}}const gt=["path","rect","circle","ellipse","polygon","polyline","g","defs","marker","line","text","pattern","mask","svg"];function mt(t,e){if(!t)return;const n=e?e._el:document.documentElement,r="string"==typeof t?n.querySelector(t):t;if(!r)return;if(r._view)return r._view;const i=(r.tagName||"").toLowerCase();return"svg"===i?new lt(r):"canvas"===i?new ft(r):"form"===i?new ut(r):"input"===i||"select"===i?new dt(r):"video"===i||"audio"===i?new pt(r):gt.includes(i)?new ct(r):new at(r)}function wt(t,e={},n){const r=gt.includes(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);for(const[t,n]of Object.entries(e))void 0!==n&&("id"===t?r.id=n:"html"===t?r.innerHTML=n:"text"===t?r.textContent=n:"path"===t?r.setAttribute("d",rt(n)):r.setAttribute(t,n));const i=mt(r);return n&&n.append(i),i}const yt=new ht(document.body),vt=new ht(document.documentElement),xt={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46};var _t;!function(t){const e=window.navigator.userAgent.toLowerCase();t.isMobile=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e),t.isRetina=(window.devicePixelRatio||1)>1,t.isTouch=window.Touch||"ontouchstart"in window,t.isChrome=!!window.chrome,t.isFirefox=e.indexOf("firefox")>=0,t.isAndroid=e.indexOf("android")>=0,t.isIOS=/iphone|ipad|ipod/i.test(e),t.isSafari=/^((?!chrome|android).)*safari/i.test(e),t.redraw=function(){document.body.offsetHeight};const n=[];let o=!1;function s(){if(!o){o=!0;for(const t of n)t();setTimeout(h)}}window.onload=s,document.addEventListener("DOMContentLoaded",s),t.ready=function(t){o?t():n.push(t)};const a=[];t.width=window.innerWidth,t.height=window.innerHeight;const l=r(()=>{t.width=window.innerWidth,t.height=window.innerHeight;for(const e of a)e({width:t.width,height:t.height});yt.trigger("scroll",{top:yt.scrollTop})});function h(){l()}function u(t,e,n=31536e3){document.cookie=`${t}=${e};path=/;max-age=${n}`}t.onResize=function(e){e({width:t.width,height:t.height}),a.push(e)},t.offResize=function(t){const e=a.indexOf(t);e>=0&&a.splice(e,1)},t.resize=h,window.addEventListener("resize",()=>{const e=window.innerWidth,n=window.innerHeight;t.width===e&&t.height===n||(t.width=e,t.height=n,l())}),t.getHash=function(){return window.location.hash.slice(1)},t.setHash=function(t){const e=document.body.scrollTop;window.location.hash=t,document.body.scrollTop=e},t.getCookies=function(){const t=document.cookie.split(";"),e={};for(let n=0,r=t.length;n<r;++n){const r=t[n].split("=");r[0]=r[0].replace(/^\s+|\s+$/,""),e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e},t.getCookie=function(t){const e=document.cookie.match(new RegExp(`(^|;) ?${t}=([^;]*)(;|$)`));return e?e[2]:void 0},t.setCookie=u,t.deleteCookie=function(t){u(t,"",-1)};const d="_M";function f(t,e){const n=(t||"").split("."),r=i(window.localStorage.getItem(d)||void 0);let o=r;for(let t=0;t<n.length-1;++t)null==o[n[t]]&&(o[n[t]]={}),o=o[n[t]];o[n[n.length-1]]=e,window.localStorage.setItem(d,JSON.stringify(r))}function p(){const t=document.activeElement;return t===document.body?void 0:mt(t)}t.setStorage=f,t.getStorage=function(t){let e=i(window.localStorage.getItem(d)||void 0);if(!t)return e;const n=(t||"").split("."),r=n.pop();for(const t of n){if(!(t in e))return;e=e[t]}return e[r]},t.deleteStorage=function(t){t?f(t,void 0):window.localStorage.setItem(d,"")},t.getActiveInput=p,t.onKey=function(t,e,n=!1){const r=c(t),i=r.map(t=>xt[t]||t),o=n?"keyup":"keydown";document.addEventListener(o,(function(t){const n=p();if(n&&n.is("input, textarea, [contenteditable]"))return;const o=i.indexOf(t.keyCode);o>=0&&e(t,r[o])}))}}(_t||(_t={}));const bt=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||+(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||+(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537,Mt={};function Tt(){if(!bt)return;Array.from(document.querySelectorAll("svg > use")).forEach((function(t){const e=t.getAttribute("xlink:href"),[n,r]=e.split("#");if(!n.length||!r)return;const i=t.parentNode;i.removeChild(t),n in Mt||(Mt[n]=fetch(n).then(t=>t.text())),Mt[n].then(t=>{const e=document.implementation.createHTMLDocument("");e.documentElement.innerHTML=t;const n=e.getElementById(r).cloneNode(!0),o=document.createDocumentFragment();for(;n.childNodes.length;)o.appendChild(n.firstChild);i.appendChild(o)})}))}let kt=!1;setTimeout(()=>kt=!0);const At="cubic-bezier(0.175, 0.885, 0.32, 1.275)",Ct="cubic-bezier(0.68, -0.275, 0.825, 0.115)",Lt={cancel:()=>{},promise:Promise.resolve()};function $t(t,e=0,n=0){switch(t){case"quad":return e**2;case"cubic":return e**3;case"quart":return e**4;case"quint":return e**5;case"circ":return 1-Math.sqrt(1-e**2);case"sine":return 1-Math.cos(e*Math.PI/2);case"exp":return e<=0?0:Math.pow(2,10*(e-1));case"back":return n||(n=1.70158),e*e*((n+1)*e-n);case"elastic":return n||(n=.3),-Math.pow(2,10*(e-1))*Math.sin((2*(e-1)/n-.5)*Math.PI);case"swing":return.5-Math.cos(e*Math.PI)/2;case"spring":return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e);case"bounce":return e<1/11?1/64-7.5625*(.5/11-e)*(.5/11-e):e<3/11?1/16-7.5625*(2/11-e)*(2/11-e):e<7/11?.25-7.5625*(5/11-e)*(5/11-e):1-7.5625*(1-e)*(1-e);default:return e}}function Et(t,e,r=400,i=0,o="ease-in-out"){if(!kt)return Object.keys(e).forEach(n=>{const r=e[n];t.css(n,Array.isArray(r)?r[1]:r)}),Lt;"bounce-in"===o&&(o=At),"bounce-out"===o&&(o=Ct);let s="";_t.isSafari&&(s=t._el.style.transition,t.css("transition","none"),_t.redraw());const c=t._data.animation;c&&c.cancel();const l={},h={},u=n(),d=window.getComputedStyle(t._el);Object.keys(e).forEach(n=>{const r=e[n],o=function(t){return t.toLowerCase().replace(/^-/,"").replace(/-(.)/g,(t,e)=>e.toUpperCase())}(n);h[o]=Array.isArray(r)?r[0]:d.getPropertyValue(n),l[o]=Array.isArray(r)?r[1]:r,i&&t.css(n,h[o])});const f=l.height;let p;"auto"===l.height&&(l.height=a(t.children.map(t=>t.outerHeight))+"px");let g=!1;!function(t,e=0){e?setTimeout(t,e):t()}(()=>{g||((p=t._el.animate([h,l],{duration:r,easing:o,fill:"forwards"})).onfinish=()=>{t._el&&Object.keys(e).forEach(e=>t.css(e,"height"===e?f:l[e])),_t.isSafari&&t.css("transition",s),u.resolve(),p.cancel()})},i);const m={cancel(){g=!0,t._el&&Object.keys(e).forEach(e=>t.css(e,t.css(e))),p&&p.cancel()},promise:u.promise};return setTimeout(()=>t._data.animation=m),m}const St=/matrix\([0-9.\-\s]+,[0-9.\-\s]+,[0-9.\-\s]+,[0-9.\-\s]+,([0-9.\-\s]+),([0-9.\-\s]+)\)/;function Pt(t,e){const n=e.regex.exec(t);if(n){n.shift();const t={};for(const[r,i]of e.params.entries())t[i]=n[r];return t}}let It="complete"===document.readyState;window.addEventListener("load",()=>setTimeout(()=>It=!0)),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");new class extends l{constructor(){super(...arguments),this.$viewport=yt,this.views=[],this.active={path:"",hash:"",index:0},this.search=window.location.search,this.preloaded=!1,this.transition=!1,this.noLoad=!1,this.initialise=()=>{}}setup(t={}){t.$viewport&&(this.$viewport=t.$viewport),t.initialise&&(t.initialise=this.initialise),t.preloaded&&(this.preloaded=t.preloaded),t.transition&&(this.transition=t.transition),t.noLoad&&(this.noLoad=t.noLoad),t.click&&yt.on("click",t=>this.onLinkClick(t)),t.history&&window.addEventListener("popstate",t=>{It&&t.state&&this.goToState(t.state)})}view(t,{enter:e,exit:n,template:r}={}){const i=(t.match(/:\w+/g)||[]).map(t=>t.substr(1)),o=t.replace(/:\w+/g,"([\\w-]+)").replace("/","\\/")+"\\/?",s=t.includes("?")?"":"(\\?.*)?",a={regex:new RegExp("^"+o+s+"$","i"),params:i,enter:e,exit:n,template:r};this.views.push(a);const c=Pt(window.location.pathname,a);c&&(this.active={path:window.location.pathname+this.search,hash:window.location.hash,index:0},window.history.replaceState(this.active,"",this.active.path+this.active.hash),_t.ready(()=>{setTimeout(()=>{this.preloaded?(this.initialise(this.$viewport,c),a.enter&&a.enter(this.$viewport,c)):this.loadView(a,c,window.location.pathname)})}))}paths(...t){for(const e of t)this.view(e)}getView(t){for(const e of this.views){const n=Pt(t,e);if(n)return{view:e,params:n}}}load(t,e=""){const n=this.getView(t);return t===this.active.path&&e!==this.active.hash?(console.info("[boost] Routing to "+t+e),this.trigger("hashChange",e.slice(1)),this.trigger("change",t+e),!0):!(!n||t===this.active.path)&&(console.info("[boost] Routing to "+t+e),this.trigger("change",t+e),window.ga&&window.ga("send","pageview",t+e),this.noLoad?n.view.enter&&n.view.enter(this.$viewport,n.params):this.loadView(n.view,n.params,t),!0)}loadView(t,e={},n=""){return m(this,void 0,void 0,(function*(){this.$viewport.css({opacity:.4,"pointer-events":"none"});const r=yield function(t,e,n){return m(this,void 0,void 0,(function*(){if(t.template)return"string"==typeof t.template?t.template:t.template(e);return(yield fetch(n+(n.indexOf("?")>=0?"&xhr=1":"?xhr=1"))).text()}))}(t,e,n);this.$viewport.css("opacity",0),setTimeout(()=>{this.$viewport.removeChildren(),yt.scrollTop=0,this.$viewport.html=r,_t.resize(),Tt(),this.$viewport.css({opacity:1,"pointer-events":"all"});const n=this.$viewport.$("title");n&&(document.title=n.text),this.initialise(this.$viewport,e),t.enter&&t.enter(this.$viewport,e),this.trigger("afterChange",{$viewport:this.$viewport})},350)}))}onLinkClick(t){if(t.metaKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;let e=t.target;for(;e&&"A"!==e.nodeName;)e=e.parentNode;if(!e||"A"!==e.nodeName)return;const n=e;if(n.target)return;if(n.origin!==window.location.origin)return;if(n.hasAttribute("download")||"external"===n.getAttribute("rel"))return;const r=n.getAttribute("href");r&&r.indexOf("mailto:")>-1||this.goTo(n.pathname+n.search,n.hash)&&t.preventDefault()}goToState(t){if(!t||!t.path)return;const e=this.load(t.path+this.search,t.hash);e&&t.index<this.active.index&&this.trigger("back"),e&&t.index>this.active.index&&this.trigger("forward"),this.active=t}goTo(t,e=""){const n=this.load(t,e);if(n){const n=this.active?this.active.index+1:0;this.active={path:t,hash:e,index:n},window.history.pushState(this.active,"",t+e)}return n}back(){window.history.back()}forward(){window.history.forward()}};vt.addClass((_t.isMobile?"is":"not")+"-mobile"),Tt(),_t.ready(()=>{const t=mt(".api-body");if(!t)return;const e=mt(".sidebar-body"),n=[];let r,i,o;t.$$("h2, h3").forEach((t,i)=>{const o=t.$("a").id;let s,a;t.is("h2")?(s=wt("a",{href:"#"+o,html:t.text},e),r=a=wt("div",{class:"hidden"},e)):(s=wt("a",{href:"#"+o,html:o.replace("+","#").replace("module_","")},r),a=r),_t.onResize(()=>n[i]=[t.positionTop,s,a])}),yt.on("scroll",(function({top:t}){let e=function(t){for(let e of n)if(e[0]>t)return e}(t);e[1]!==i&&(i&&i.removeClass("active"),(i=e[1]).addClass("active")),e[2]!==o&&(o&&o.addClass("hidden"),(o=e[2])&&o.removeClass("hidden"))}))})}();