/* (c) Mathigon */
!function(){"use strict";function t(t,...e){return e.includes(t)}const e=(t,e)=>t.concat(e);function n(){let t=t=>{},e=t=>{};const n=new Promise((n,r)=>{t=n,e=r});return n.catch(t=>t),{promise:n,resolve:t,reject:e}}function r(t,e=0,n=!1){let r=!1,i=!1;return(...s)=>{r?i=!0:(n?i=!0:t(...s),r=!0,setTimeout(()=>{i&&t(...s),r=i=!1},e))}}function i(t,e={}){if(!t)return e;try{return JSON.parse(t)||e}catch(t){return e}}function s(t,e){return new Array(e).fill(t)}function o(t,e=0){return t[t.length-1-e]}function a(t){return t.reduce((t,e)=>t+e,0)}function c(t,e=/\s+/){return t?t.trim().split(e):[]}class l{constructor(){this.events=new Map}on(t,e){for(let n of c(t))this.events.has(n)||this.events.set(n,[]),this.events.get(n).push(e)}one(t,e){const n=r=>{this.off(t,n),e(r)};this.on(t,n)}off(t,e){for(let n of c(t))this.events.has(n)&&this.events.set(n,this.events.get(n).filter(t=>t!==e))}trigger(t,e){for(let n of c(t))if(this.events.has(n))for(const t of this.events.get(n))t(e)}}function h(t){const e=[];for(let n of Object.keys(t)){let r=t[n];n=encodeURIComponent(n),null!=r?(r=(r=Array.isArray(r)?r.join(","):""+r).replace(/(\r)?\n/g,"\r\n"),r=(r=encodeURIComponent(r)).replace(/%20/g,"+"),e.push(n+"="+r)):e.push(n)}return e.join("&")}function u(t,e){const n={method:"POST",body:e?"string"==typeof e?e:h(e):void 0,headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":window.csrfToken||""}},r=t.includes("?")?"&xhr=1":"?xhr=1";return fetch(t+r,n).then(t=>t.text())}const d=new Map;function f(t,n){d.has(t)?function t(n,r,i=e){for(const e of Object.keys(r))e in n&&Array.isArray(n[e])&&Array.isArray(r[e])?n[e]=i(n[e],r[e]):e in n&&n[e]instanceof Object&&r[e]instanceof Object?t(n[e],r[e]):n[e]=r[e]}(d.get(t),n,(t,e)=>(function(t){return t.filter((e,n)=>t.indexOf(e)===n)})(t.concat(e))):d.set(t,n)}function p(){if(window.navigator.onLine)for(const[t,e]of d)d.delete(t),u(t,{data:JSON.stringify(e)}).catch(n=>{console.error("Failed to send POST request:",n),f(t,e)})}const g=r(p,5e3);function m(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,a)}c((r=r.apply(t,e||[])).next())}))}window.addEventListener("online",g),window.onbeforeunload=p;const w=1e-6;function y(t,e,n=w){return!isNaN(t)&&!isNaN(e)&&Math.abs(t-e)<n}function v(t,e,n,r=w){return e>n&&([e,n]=[n,e]),t>e+r&&t<n-r}function x(t,e=1){return Math.round(t/e)*e}function b(t,e=-1/0,n=1/0){return Math.min(n,Math.max(e,t))}function _(t,e,n=.5){return t+(e-t)*n}function M(t){return t*t}function A(t,e=0){const n=function t(e){if(1===e.length)return[[],e];const n=e.pop(),r=t(e),i=[];for(const t of r)i.push(t,[...t,n]);return i}(t.slice(0));return e?n.filter(t=>t.length===e):n}class C{constructor(t=0,e=0){this.x=t,this.y=e,this.type="point"}get unitVector(){return y(this.length,0)?new C(1,0):this.scale(1/this.length)}get length(){return Math.sqrt(this.x**2+this.y**2)}get inverse(){return new C(-this.x,-this.y)}get flip(){return new C(this.y,this.x)}get perpendicular(){return new C(-this.y,this.x)}get array(){return[this.x,this.y]}distanceFromLine(t){return C.distance(this,t.project(this))}clamp(t,e=0){const n=b(this.x,t.xMin+e,t.xMax-e),r=b(this.y,t.yMin+e,t.yMax-e);return new C(n,r)}transform(t){const e=t[0][0]*this.x+t[0][1]*this.y+t[0][2],n=t[1][0]*this.x+t[1][1]*this.y+t[1][2];return new C(e,n)}rotate(t,e=L){const n=this.x-e.x,r=this.y-e.y,i=Math.cos(t),s=Math.sin(t),o=n*i-r*s+e.x,a=n*s+r*i+e.y;return new C(o,a)}reflect(t){let e=t.p2.x-t.p1.x,n=t.p2.y-t.p1.y,r=this.x-t.p1.x,i=(e*(this.y-t.p1.y)-n*r)/(e*e+n*n),s=this.x+2*i*n,o=this.y-2*i*e;return new C(s,o)}scale(t,e=t){return new C(this.x*t,this.y*e)}shift(t,e=t){return new C(this.x+t,this.y+e)}translate(t){return this.shift(t.x,t.y)}changeCoordinates(t,e){const n=e.xMin+(this.x-t.xMin)/t.dx*e.dx,r=e.yMin+(this.y-t.yMin)/t.dy*e.dy;return new C(n,r)}add(t){return C.sum(this,t)}subtract(t){return C.difference(this,t)}equals(t){return y(this.x,t.x)&&y(this.y,t.y)}round(t=1){return new C(x(this.x,t),x(this.y,t))}floor(){return new C(Math.floor(this.x),Math.floor(this.y))}mod(t,e=t){return new C(this.x%t,this.y%e)}angle(t=L){return T(this,t)}static average(...t){let e=a(t.map(t=>t.x))/t.length,n=a(t.map(t=>t.y))/t.length;return new C(e,n)}static dot(t,e){return t.x*e.x+t.y*e.y}static sum(t,e){return new C(t.x+e.x,t.y+e.y)}static difference(t,e){return new C(t.x-e.x,t.y-e.y)}static distance(t,e){return Math.sqrt(M(t.x-e.x)+M(t.y-e.y))}static manhattan(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}static interpolate(t,e,n=.5){return new C(_(t.x,e.x,n),_(t.y,e.y,n))}static interpolateList(t,e=.5){const n=t.length-1,r=Math.floor(b(e,0,1)*n);return C.interpolate(t[r],t[r+1],n*e-r)}static fromPolar(t,e=1){return new C(e*Math.cos(t),e*Math.sin(t))}}const L=new C(0,0),k=2*Math.PI;function T(t,e=L){return(Math.atan2(t.y-e.y,t.x-e.x)+k)%k}class E{constructor(t,e){this.p1=t,this.p2=e,this.type="line"}make(t,e){return new E(t,e)}get length(){return C.distance(this.p1,this.p2)}get midpoint(){return C.average(this.p1,this.p2)}get slope(){return(this.p2.y-this.p1.y)/(this.p2.x-this.p1.x)}get intercept(){return this.p1.y+this.slope*this.p1.x}get angle(){return T(this.p2,this.p1)}get unitVector(){return this.p2.subtract(this.p1).unitVector}get perpendicularVector(){return new C(this.p2.y-this.p1.y,this.p1.x-this.p2.x).unitVector}parallel(t){const e=C.sum(t,C.difference(this.p2,this.p1));return new E(t,e)}perpendicular(t){return new E(t,C.sum(t,this.perpendicularVector))}get perpendicularBisector(){return this.perpendicular(this.midpoint)}project(t){const e=C.difference(this.p2,this.p1),n=C.difference(t,this.p1),r=e.scale(C.dot(e,n)/this.length**2);return C.sum(this.p1,r)}contains(t){return y(t.x*(this.p1.y-this.p2.y)+this.p1.x*(this.p2.y-t.y)+this.p2.x*(t.y-this.p1.y),0)}at(t){return C.interpolate(this.p1,this.p2,t)}transform(t){return new this.constructor(this.p1.transform(t),this.p2.transform(t))}rotate(t,e=L){return new this.constructor(this.p1.rotate(t,e),this.p2.rotate(t,e))}reflect(t){return new this.constructor(this.p1.reflect(t),this.p2.reflect(t))}scale(t,e=t){return this.make(this.p1.scale(t,e),this.p2.scale(t,e))}shift(t,e=t){return this.make(this.p1.shift(t,e),this.p2.shift(t,e))}translate(t){return this.shift(t.x,t.y)}equals(t){return this.contains(t.p1)&&this.contains(t.p2)}}function $(e){return t(e.type,"polygon","polyline","rectangle")}function S(e){return t(e.type,"line","ray","segment")}function P(t){return"circle"===t.type}function O(t,e){return y(t.p1.x,t.p2.x)?v(e.y,t.p1.y,t.p2.y):v(e.x,t.p1.x,t.p2.x)}function I(t,e){return y(t.p1.x,t.p2.x)?(e.y-t.p1.y)/(t.p2.y-t.p1.y)>0:(e.x-t.p1.x)/(t.p2.x-t.p1.x)>0}function V(t,e){const n=t.p2.x-t.p1.x,r=t.p2.y-t.p1.y,i=M(n)+M(r),s=e.c.x,o=e.c.y,a=(t.p1.x-s)*(t.p2.y-o)-(t.p2.x-s)*(t.p1.y-o),c=M(e.r)*i-M(a);if(c<0)return[];const l=a*r/i,h=-a*n/i;if(y(c,0))return[e.c.shift(l,h)];const u=n*(r<0?-1:1)*Math.sqrt(c)/i,d=Math.abs(r)*Math.sqrt(c)/i;return[e.c.shift(l+u,h+d),e.c.shift(l-u,h-d)]}function q(...t){if(t.length<2)return[];if(t.length>2)return function t(e){return e.reduce((e,n)=>e.concat(Array.isArray(n)?t(n):n),[])}(A(t,2).map(t=>q(...t)));let[e,n]=t;if($(n)&&([e,n]=[n,e]),$(e)){return[...S(n)?e.points.filter(t=>n.contains(t)):[],...q(n,...e.edges)]}return function(t,e){let n=[];S(t)&&S(e)?n=function(t,e){const n=t.p1.x-t.p2.x,r=t.p1.y-t.p2.y,i=e.p1.x-e.p2.x,s=e.p1.y-e.p2.y,o=n*s-r*i;if(y(o,0))return[];const a=t.p1.x*t.p2.y-t.p1.y*t.p2.x,c=e.p1.x*e.p2.y-e.p1.y*e.p2.x;return[new C((a*i-n*c)/o,(a*s-r*c)/o)]}(t,e):S(t)&&P(e)?n=V(t,e):P(t)&&S(e)?n=V(e,t):P(t)&&P(e)&&(n=function(t,e){const n=C.distance(t.c,e.c);if(n>t.r+e.r)return[];if(n<Math.abs(t.r-e.r))return[];if(y(n,0)&&y(t.r,e.r))return[];if(y(n,t.r+e.r))return[new E(t.c,e.c).midpoint];const r=(M(t.r)-M(e.r)+M(n))/(2*n),i=Math.sqrt(M(t.r)-M(r)),s=(e.c.x-t.c.x)*r/n+(e.c.y-t.c.y)*i/n+t.c.x,o=(e.c.y-t.c.y)*r/n-(e.c.x-t.c.x)*i/n+t.c.y,a=(e.c.x-t.c.x)*r/n-(e.c.y-t.c.y)*i/n+t.c.x,c=(e.c.y-t.c.y)*r/n+(e.c.x-t.c.x)*i/n+t.c.y;return[new C(s,o),new C(a,c)]}(t,e));for(const r of[t,e])"segment"===r.type&&(n=n.filter(t=>O(r,t))),"ray"===r.type&&(n=n.filter(t=>I(r,t)));return n}(e,n)}var N,W,H,R;!function(t){function e(t,e,n){return function(t,e,n){const r=[];for(let i=0;i<e;++i)r.push(s(t,n));return r}(t,e,n)}function n(t=2){const n=e(0,t,t);for(let e=0;e<t;++e)n[e][e]=1;return n}t.fill=e,t.identity=n,t.rotation=function(t){const e=Math.sin(t),n=Math.cos(t);return[[n,-e],[e,n]]},t.shear=function(t){return[[1,t],[0,1]]},t.reflection=function(t){const e=Math.sin(2*t),n=Math.cos(2*t);return[[n,e],[e,-n]]},t.sum=function t(...e){const[n,...r]=e,i=r.length>1?t(...r):r[0];if(n.length!==i.length||n[0].length!==i[0].length)throw new Error("Matrix sizes don’t match");const s=[];for(let t=0;t<n.length;++t){const e=[];for(let r=0;r<n[t].length;++r)e.push(n[t][r]+i[t][r]);s.push(e)}return s},t.scalarProduct=function(t,e){return t.map(t=>t.map((t,n)=>t*e))},t.product=function t(...e){let[n,...r]=e,i=r.length>1?t(...r):r[0];if(n[0].length!==i.length)throw new Error("Matrix sizes don’t match.");let s=[];for(let t=0;t<n.length;++t){let e=[];for(let r=0;r<i[0].length;++r){let s=0;for(let e=0;e<i.length;++e)s+=n[t][e]*i[e][r];e.push(s)}s.push(e)}return s},t.transpose=function(t){let e=[];for(let n=0;n<t[0].length;++n){let r=[];for(let e=0;e<t.length;++e)r.push(t[e][n]);e.push(r)}return e},t.determinant=function(t){if(t.length!==t[0].length)throw new Error("Not a square matrix.");let e=t.length;if(1===e)return t[0][0];if(2===e)return t[0][0]*t[1][1]-t[0][1]*t[1][0];let n=0;for(let r=0;r<e;++r){let i=t[0][r],s=t[0][r];for(let n=1;n<e;++n)s*=t[n][r+n%e],i*=t[n][r-n%e];n+=s-i}return n},t.inverse=function(t){let e=t.length;if(e!==t[0].length)throw new Error("Not a square matrix.");let r=n(e),i=function(t,e,n){const r=[];for(let i=0;i<e;++i){const e=[];for(let r=0;r<n;++r)e.push(t(i,r));r.push(e)}return r}((e,n)=>t[e][n],e,e);for(let t=0;t<e;++t){let n=i[t][t];if(!n){for(let n=t+1;n<e;++n)if(0!==i[n][t]){for(let s=0;s<e;++s)[i[n][s],i[t][s]]=[i[t][s],i[n][s]],[r[n][s],r[t][s]]=[r[t][s],r[n][s]];break}if(!(n=i[t][t]))throw new Error("Matrix not invertible.")}for(let s=0;s<e;++s)i[t][s]=i[t][s]/n,r[t][s]=r[t][s]/n;for(let n=0;n<e;++n){if(n===t)continue;let s=i[n][t];for(let o=0;o<e;++o)i[n][o]-=s*i[t][o],r[n][o]-=s*r[t][o]}}return r}}(N||(N={})),function(t){function e(t){const e=Math.random()*a(t);let n=0;return t.findIndex(t=>(n+=t)>=e)}t.shuffle=function(t){for(let e=(t=t.slice(0)).length-1;e>0;--e){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},t.integer=function(t,e){let n=void 0===e?t:e-t+1;return(void 0===e?0:t)+Math.floor(n*Math.random())},t.weighted=e;const n=new Map;function r(t=.5){return Math.random()<t?1:0}t.smart=function(t,r){r||(r=function(t=10){return Math.random().toString(36).substr(2,t)}()),n.has(r)||n.set(r,s(1,t));const i=n.get(r),o=e(i.map(t=>t*t));return i[o]-=1,i[o]<=0&&n.set(r,i.map(t=>t+1)),o},t.bernoulli=r,t.binomial=function(t=1,e=.5){let n=0;for(let i=0;i<t;++i)n+=r(e);return n},t.poisson=function(t=1){if(t<=0)return 0;const e=Math.exp(-t);let n=1,r=0;for(;n>e;++r)n*=Math.random();return r-1},t.uniform=function(t=0,e=1){return t+(e-t)*Math.random()},t.normal=function(t=0,e=1){const n=Math.random(),r=Math.random();return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r)*Math.sqrt(e)+t},t.exponential=function(t=1){return t<=0?0:-Math.log(Math.random())/t},t.geometric=function(t=.5){if(!(t<=0||t>1))return Math.floor(Math.log(Math.random())/Math.log(1-t))},t.cauchy=function(){let t,e,n;do{t=(e=2*Math.random()-1)*e+(n=2*Math.random()-1)*n}while(t>=1);return e/n},t.normalPDF=function(t,e=1,n=0){return Math.exp(-((t-e)**2)/(2*n))/Math.sqrt(2*Math.PI*n)};const i=7,o=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];function c(t,e,n,r=1){let i=0;for(let s=e;s<n;s+=r)i+=t(s)*r||0;return i}t.integrate=c,t.chiCDF=function(t,e){return 1-c(t=>Math.pow(t,(e-2)/2)*Math.exp(-t/2),0,t)/Math.pow(2,e/2)/function t(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));e-=1;let n=o[0];for(let t=1;t<i+2;t++)n+=o[t]/(e+t);let r=e+i+.5;return Math.sqrt(2*Math.PI)*Math.pow(r,e+.5)*Math.exp(-r)*n}(e/2)}}(W||(W={})),function(t){function e(t,e=!1){let n=0,r=0,i=0,s=0;const o=t.length;for(let e=0;e<o;e++)n+=t[e][0],r+=t[e][1],i+=t[e][0]*t[e][0],s+=t[e][0]*t[e][1];if(e){return[0,s/i]}const a=(o*s-n*r)/(o*i-n*n);return[r/o-a*n/o,a]}function n(t){const e=[0,0,0,0,0,0];for(const n of t)e[0]+=n[0],e[1]+=n[1],e[2]+=n[0]*n[0]*n[1],e[3]+=n[1]*Math.log(n[1]),e[4]+=n[0]*n[1]*Math.log(n[1]),e[5]+=n[0]*n[1];const n=e[1]*e[2]-e[5]*e[5];return[Math.exp((e[2]*e[3]-e[5]*e[4])/n),(e[1]*e[4]-e[5]*e[3])/n]}function r(t,e=2){let n=t.map(t=>(function(t,e,n=1){const r=[];if(void 0===e&&t>=0)for(let e=0;e<t;e+=n)r.push(e);else if(void 0===e)for(let e=0;e>t;e-=n)r.push(e);else if(t<=e)for(let i=t;i<=e;i+=n)r.push(i);else for(let i=t;i>=e;i-=n)r.push(i);return r})(e+1).map(e=>Math.pow(t[0],e))),r=N.transpose(n),i=t.map(t=>[t[1]]),s=N.product(r,n),o=N.inverse(s);return N.product(o,r,i).map(t=>t[0])}function i(t,e){let n=t.reduce((t,e)=>t+e[1],0)/t.length,r=t.reduce((t,e)=>t+(e[1]-n)**2,0);return 1-t.reduce((t,n)=>t+(n[1]-e(n[0]))**2,0)/r}t.linear=e,t.exponential=n,t.logarithmic=function(t){const e=[0,0,0,0],n=t.length;for(const n of t)e[0]+=Math.log(n[0]),e[1]+=n[1]*Math.log(n[0]),e[2]+=n[1],e[3]+=Math.pow(Math.log(n[0]),2);const r=(n*e[1]-e[2]*e[0])/(n*e[3]-e[0]*e[0]);return[(e[2]-r*e[0])/n,r]},t.power=function(t){const e=[0,0,0,0],n=t.length;for(const n of t)e[0]+=Math.log(n[0]),e[1]+=Math.log(n[1])*Math.log(n[0]),e[2]+=Math.log(n[1]),e[3]+=Math.pow(Math.log(n[0]),2);const r=(n*e[1]-e[2]*e[0])/(n*e[3]-e[0]*e[0]);return[Math.exp((e[2]-r*e[0])/n),r]},t.polynomial=r,t.coefficient=i;const s=[{name:"linear",regression:e,fn:(t,e)=>t[0]+e*t[1]},{name:"quadratic",regression:r,fn:(t,e)=>t[0]+e*t[1]+e*e*t[2]},{name:"cubic",regression:t=>r(t,3),fn:(t,e)=>t[0]+e*t[1]+e*e*t[2]+e*e*e*t[3]},{name:"exponential",regression:n,fn:(t,e)=>t[0]*Math.pow(Math.E,t[1]*e)}];t.find=function(t,e=.9){if(t.length>1)for(const n of s){const r=n.regression(t),s=n.fn.bind(void 0,r),o=i(t,s);if(o>e)return{type:n.name,fn:s,params:r,coeff:o}}return{type:void 0,fn:()=>{},params:[],coeff:void 0}}}(H||(H={})),function(t){t[t.Array=0]="Array",t[t.BinaryOp=1]="BinaryOp",t[t.Call=2]="Call",t[t.Conditional=3]="Conditional",t[t.Identifier=4]="Identifier",t[t.Literal=5]="Literal",t[t.Member=6]="Member",t[t.UnaryOp=7]="UnaryOp"}(R||(R={}));const z={"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"||":(t,e)=>t||e,"&&":(t,e)=>t&&e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"**":(t,e)=>t**e,"<":(t,e)=>t<e,">":(t,e)=>t>e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e},j={"-":t=>-t,"+":t=>+t,"!":t=>!t},B={"||":1,"&&":2,"==":3,"!=":3,"===":3,"!==":3,"<":4,">":4,"<=":4,">=":4,"+":5,"-":5,"*":6,"/":6,"%":6,"**":7},F={true:!0,false:!1,undefined:void 0},U=/\s/,X=/[0-9]/,D=/[a-zA-Zα-ωΑ-Ω$_]/,G=/[0-9a-zA-Zα-ωΑ-Ω$_]/;function Y(t){const e=t.length;let n=0;function r(e){throw new Error(`${e} at character ${n} of "${t}"`)}function i(){for(;U.test(t[n]);)n+=1}function s(){let i=t[n];for(D.test(t[n])||r("Unexpected "+i),n+=1;n<e&&G.test(t[n]);)i+=t[n++];return i in F?{type:R.Literal,value:F[i]}:{type:R.Identifier,name:i}}function o(i){const s=[];let o=!1,a=void 0;for(;n<e;){if(t[n]===i){a&&s.push(a),o=!0,n+=1;break}","===t[n]?(s.push(a||{type:R.Literal,value:void 0}),n+=1):a=l()}return o||r("Expected "+i),s}function a(){i();for(const e of[3,2,1]){const r=t.substr(n,e);if(r in z)return n+=e,r}}function c(){i();let a=t[n];return X.test(a)||"."===a?function(){let e="";for(;X.test(t[n]);)e+=t[n++];if("."===t[n])for(e+=t[n++];X.test(t[n]);)e+=t[n++];const i=t[n];if(i&&D.test(i)){r(`Variable names cannot start with a number (${e+t[n]})`)}else"."===i&&r("Unexpected period");return{type:R.Literal,value:parseFloat(e)}}():"'"===a||'"'===a?function(){const i=t[n];n+=1;let s=!1,o="";for(;n<e;){let e=t[n++];if(e===i){s=!0;break}o+=e}return s||r(`Unclosed quote after "${o}"`),{type:R.Literal,value:o}}():"["===a?(n+=1,{type:R.Array,elements:o("]")}):a in j?(n+=1,{type:R.UnaryOp,operator:a,argument:c()}):D.test(a)||"("===a?function(){let e;if("("===t[n]){if(n+=1,e=l(),i(),")"===t[n])return n+=1,e;r("Unclosed (")}else e=s();for(i();".[(".includes(t[n]);)"."===t[n]?(n++,i(),e={type:R.Member,object:e,computed:!1,property:s()}):"["===t[n]?(n++,e={type:R.Member,object:e,computed:!0,property:l()},i(),"]"!==t[n]&&r("Unclosed ["),n++):"("===t[n]&&(n++,e={type:R.Call,args:o(")"),callee:e}),i();return e}():void r("Expression parsing error")}function l(){const e=function(){let t=c(),e=a();if(!e)return t;let n,i=c();i||r("Expected expression after "+e);let s=[t,e,i];for(;e=a();){let o=B[e],a=e;for(;s.length>2&&o<=B[s[s.length-2]];)i=s.pop(),e=s.pop(),t=s.pop(),n={type:R.BinaryOp,operator:e,left:t,right:i},s.push(n);(n=c())||r("Expected expression after "+a),s.push(a,n)}let o=s.length-1;for(n=s[o];o>1;)n={type:R.BinaryOp,operator:s[o-1],left:s[o-2],right:n},o-=2;return n}();if(i(),!e||"?"!==t[n])return e;{n+=1;const s=l();if(s||r("Expected expression"),i(),":"===t[n]){n++;let t=l();return t||r("Expected expression"),{type:R.Conditional,test:e,consequent:s,alternate:t}}r("Expected :")}}const h=l();return n<t.length&&r(`Unexpected "${t[n]}"`),h}const K=[void 0,void 0];function J(t){const e=Y(t);return e?(t={})=>(function t(e,n){switch(e.type){case R.Array:const r=e.elements.map(e=>t(e,n)[0]);return r.some(t=>void 0===t)?K:[r,void 0];case R.BinaryOp:const i=t(e.left,n)[0],s=t(e.right,n)[0];return!"+-**/%".includes(e.operator)||void 0!==i&&void 0!==s?[z[e.operator](i,s),void 0]:K;case R.Call:const[o,a]=t(e.callee,n),c=e.args.map(e=>t(e,n)[0]);return c.some(t=>void 0===t)||"function"!=typeof o?K:[o.apply(a,c),void 0];case R.Conditional:const l=t(e.consequent,n),h=t(e.alternate,n);return t(e.test,n)[0]?l:h;case R.Identifier:return[n[e.name],void 0];case R.Literal:return[e.value,void 0];case R.Member:const u=t(e.object,n)[0],d=e.computed?t(e.property,n)[0]:e.property.name;return u?[u[d],u]:[void 0,void 0];case R.UnaryOp:const f=t(e.argument,n)[0];return void 0===f?K:[j[e.operator](f),void 0]}})(e,t)[0]:(t={})=>void 0}const Z=/\${([^}]+)}/g;function Q(t){const e=(t=t.replace(/×/g,"*")).split(Z),n=e.map((t,e)=>e%2?J(t):void 0);return t=>e.map((e,r)=>{if(!(r%2))return e;const i=n[r](t);return"number"==typeof i&&i<0?"–"+-i:i}).join("")}const tt="ontouchstart"in window,et="onpointerdown"in window;function nt(t){if(t.touches){const e=t.targetTouches.length?t.targetTouches:t.changedTouches;return new C(e[0].clientX,e[0].clientY)}return new C(t.clientX||0,t.clientY||0)}let rt;function it(t){for(const e of t){const t=e.isIntersecting?"enterViewport":"exitViewport";setTimeout(()=>St(e.target).trigger(t))}}function st(t){if(!t._data.intersectionEvents)if(t._data.intersectionEvents=!0,window.IntersectionObserver)rt||(rt=new IntersectionObserver(it)),rt.observe(t._el);else{let e=!1;Ot.on("scroll",()=>{const n=t.isInViewport;e&&!n?(t.trigger("exitViewport"),e=!1):n&&!e&&(t.trigger("enterViewport"),e=!0)})}}function ot(t){if(t._data.pointerPositionEvents)return;t._data.pointerPositionEvents=!0;const e=t.parent;let n=void 0;e.on("pointerend",()=>n=void 0),e.on("pointermove",e=>{const r=n,i=function(t){if(t instanceof PointerEvent&&"mouse"===t.pointerType)return St(t.target);const e=nt(t);return St(document.elementFromPoint(e.x,e.y)||void 0)}(e);n=i.equals(t)||i.hasParent(t),null!=r&&n&&!r&&t.trigger("pointerenter",e),!n&&r&&t.trigger("pointerleave",e)})}function at(t,e){e._data["_"+t]||(e._data["_"+t]=!0,et?e.on(t.replace("mouse","pointer"),n=>{"mouse"===n.pointerType&&e.trigger(t,n)}):tt||e._el.addEventListener(t,n=>e.trigger(t,n)))}const ct={scrollwheel:"DOMMouseScroll mousewheel",pointerdown:et?"pointerdown":tt?"touchstart":"mousedown",pointermove:et?"pointermove":tt?"touchmove":"mousemove",pointerup:et?"pointerup":tt?"touchend":"mouseup",pointercancel:et?"pointercancel":"touchcancel",pointerstop:et?"pointerup pointercancel":tt?"touchend touchcancel":"mouseup"},lt={scroll:function(t){if(t._data.scrollEvents)return;t._data.scrollEvents=!0;let e=!1,n=void 0;function r(){const i=t.scrollTop;i!==n?(n=i,t.trigger("scroll",{top:n}),window.requestAnimationFrame(r)):e=!1}function i(){e||window.requestAnimationFrame(r),e=!0}function s(){window.removeEventListener("touchmove",i),window.removeEventListener("touchend",s)}("window"===t.type?window:t._el).addEventListener("scroll",i),t._el.addEventListener("touchstart",(function(t){t.handled||(window.addEventListener("touchmove",i),window.addEventListener("touchend",s))}))},tap:function(t){if(t._data.tapEvent)return;t._data.tapEvent=!0;let e=void 0;t.on("pointerdown",t=>e=nt(t)),t.on("pointerup",n=>{if(!e)return;const r=nt(n);C.distance(e,r)<6&&t.trigger("tap",n),e=void 0}),t.on("pointercancel",()=>e=void 0)},clickOutside:function(t){t._data.clickOutsideEvent||(t._data.clickOutsideEvent=!0,Ot.on("pointerdown",e=>{const n=St(e.target);n&&(n.equals(t)||n.hasParent(t))||t.trigger("clickOutside",e)}))},key:function(t){t.on("keydown",e=>{if(e.metaKey||e.ctrlKey)return;if(qt.isAndroid&&229===e.keyCode)return;const n=(e.key||String.fromCharCode(e.which)).toLowerCase();t.trigger("key",{code:e.keyCode,key:n})}),qt.isAndroid&&"input"===t.type&&t.on("input",e=>{const n=e.data[e.data.length-1].toLowerCase();t.trigger("key",{code:void 0,key:n}),t.value=""})},mousedown:at.bind(void 0,"mousedown"),mousemove:at.bind(void 0,"mousemove"),mouseup:at.bind(void 0,"mouseup"),pointerenter:ot,pointerleave:ot,enterViewport:st,exitViewport:st,resize:function(t,e=!1){if(e&&(t._data.resizeObserver&&t._data.resizeObserver.disconnect(),t._data.resizeObserver=void 0),!t._data.resizeObserver)if(window.ResizeObserver){const e=new window.ResizeObserver(()=>t.trigger("resize"));e.observe(t._el),t._data.resizeObserver=e}else if(window.MutationObserver){const e=new MutationObserver(()=>t.trigger("resize"));e.observe(t._el,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t._data.resizeObserver=e}}};function ht(t,e,n,r){if(e in lt)lt[e](t,!1);else if(e in ct){const i=c(ct[e]);for(const e of i)t._el.addEventListener(e,n,r)}else t._el.addEventListener(e,n,r)}function ut(t,e,n){if(e in lt)t._events[e]&&t._events[e].length||lt[e](t,!0);else if(n&&e in ct){const r=c(ct[e]);for(const e of r)t._el.removeEventListener(e,n)}else n&&t._el.removeEventListener(e,n)}function dt(t,e,n){const r=e.x*(n.y-t.y)+t.x*(e.y-n.y)+n.x*(t.y-e.y)>0?1:0,i=C.distance(e,t);return[t.x,t.y+"A"+i,i,0,r,1,n.x,n.y].join(",")}function ft(t,e={}){let n=t.a;const r=t.b;let i=t.c;const s=e.size||function(t,e={}){return t.isRight&&!e.round?20:24+20*(1-b(t.rad,0,Math.PI)/Math.PI)}(t,e),o=C.difference(n,r).unitVector,a=C.difference(i,r).unitVector;n=C.sum(r,o.scale(s)),i=C.sum(r,a.scale(s));let c=e.fill?`M${r.x},${r.y}L`:"M";if(t.isRight&&!e.round){const t=C.sum(n,a.scale(s));c+=`${n.x},${n.y}L${t.x},${t.y}L${i.x},${i.y}`}else c+=dt(n,r,i);return e.fill&&(c+="Z"),c}function pt(...t){return"M"+t.map(t=>t.x+","+t.y).join("L")}function gt(t,e){const n=t.perpendicularVector.scale(6),r=t.unitVector.scale(3),i=t.midpoint;switch(e){case"bar":return pt(i.add(n),i.add(n.inverse));case"bar2":return pt(i.add(r).add(n),i.add(r).add(n.inverse))+pt(i.add(r.inverse).add(n),i.add(r.inverse).add(n.inverse));case"arrow":return pt(i.add(r.inverse).add(n),i.add(r),i.add(r.inverse).add(n.inverse));case"arrow2":return pt(i.add(r.scale(-2)).add(n),i,i.add(r.scale(-2)).add(n.inverse))+pt(i.add(n),i.add(r.scale(2)),i.add(n.inverse));default:return""}}function mt(t,e){if(!t||!e)return"";const n=e.perpendicular,r=t.add(e.scale(9)).add(n.scale(9)),i=t.add(e.scale(9)).add(n.scale(-9));return pt(r,t,i)}function wt(e,n={}){if("angle"===e.type)return ft(e=e,n);if("segment"===e.type){if((e=e).p1.equals(e.p2))return"";let r=pt(e.p1,e.p2);return n.mark&&(r+=gt(e,n.mark)),n.arrows&&(r+=function(e,n){let r="";return t(n,"start","both")&&(r+=mt(e.p1,e.unitVector)),t(n,"end","both")&&(r+=mt(e.p2,e.unitVector.inverse)),r}(e,n.arrows)),r}if("ray"===e.type){if(e=e,!n.box)return"";const t=q(e,n.box)[0];return t?pt(e.p1,t):""}if("line"===e.type){if(e=e,!n.box)return"";const t=q(e,n.box);if(t.length<2)return"";let r=pt(t[0],t[1]);return n.mark&&(r+=gt(e,n.mark)),r}if("circle"===e.type)return`M ${(e=e).c.x-e.r} ${e.c.y} a ${e.r},${e.r} 0 1 0 `+`${2*e.r} 0 a ${e.r} ${e.r} 0 1 0 ${-2*e.r} 0`;if("arc"===e.type){let r="M"+dt((e=e).start,e.c,e.end);return n.arrows&&(r+=function(e,n){let r="";if(t(n,"start","both")){const t=new E(e.c,e.start).perpendicularVector.inverse;r+=mt(e.start,t)}if(t(n,"end","both")){const t=new E(e.c,e.end).perpendicularVector;r+=mt(e.end,t)}return r}(e,n.arrows)),r}return"sector"===e.type?`M ${(e=e).c.x} ${e.c.y} L ${dt(e.start,e.c,e.end)} Z`:"polyline"===e.type?pt(...(e=e).points):"polygon"===e.type||"triangle"===e.type?pt(...(e=e).points)+"Z":"rectangle"===e.type?pt(...(e=e).polygon.points)+"Z":""}const yt={C:6,S:4,Q:4,A:7},vt=/[MmLlCcSsQqTtAa][0-9,.\-\s]+/g,xt=/-?([0-9]*\.)?[0-9]+/g;class bt{constructor(t){this._el=t,this._data={},this._events={},this.type="default",t._view=this}get id(){return this._el.id}get data(){return this._el.dataset}get tagName(){return this._el.tagName.toUpperCase()}equals(t){return this._el===t._el}addClass(t){for(const e of c(t))this._el.classList.add(e)}removeClass(t){for(const e of c(t))this._el.classList.remove(e)}hasClass(t){return this._el.classList.contains(t)}toggleClass(t){return this._el.classList.toggle(t)}setClass(t,e){e?this.addClass(t):this.removeClass(t)}attr(t){return this._el.getAttribute(t)||""}hasAttr(t){return this._el.hasAttribute(t)}setAttr(t,e){void 0===e?this.removeAttr(t):this._el.setAttribute(t,e.toString())}removeAttr(t){this._el.removeAttribute(t)}get attributes(){return Array.from(this._el.attributes||[])}get html(){return this._el.innerHTML||""}set html(t){this._el.innerHTML=t}get text(){return this._el.textContent||""}set text(t){this._el.textContent=t}set textStr(t){this._el.textContent=""+t}blur(){this._el.blur()}focus(){this._el.focus()}getParentModel(){const t=this.parent;return t?t.model||t.getParentModel():void 0}bindModel(t,e=!0){var n;if(!this.model){this.model=t;for(const{name:e,value:n}of this.attributes)if(e.startsWith("@")){const r=e.slice(1),i=J(n);this.removeAttr(e),this.on(r,()=>i(t))}else if(":show"===e){const r=J(n);this.removeAttr(e),t.watch(()=>this.toggle(!!r(t)))}else if(":html"===e){const r=J(n);this.removeAttr(e),t.watch(()=>this.html=r(t)||"")}else if(":draw"===e){const e=J(n);t.watch(()=>this.draw(e(t)))}else if(":bind"===e)this.bindVariable(t,n);else if(e.startsWith(":")){const r=J(n),i=e.slice(1);this.removeAttr(e),t.watch(()=>this.setAttr(i,r(t)))}else if(n.includes("${")){const r=Q(n);t.watch(()=>this.setAttr(e,r(t)||""))}for(const r of this.childNodes)if(r instanceof Text){if(null===(n=r.textContent)||void 0===n?void 0:n.includes("${")){const e=Q(r.textContent);t.watch(()=>r.textContent=e(t)||"")}}else e&&r.bindModel(t)}}bindVariable(t,e){}get bounds(){return this._el.getBoundingClientRect()}get isInViewport(){if(0===this.height)return!1;const t=this.bounds;return v(t.top,-t.height,qt.height)}get topLeftPosition(){const t=this.bounds;return new C(t.left,t.top)}get boxCenter(){const t=this.bounds;return new C(t.left+t.width/2,t.top+t.height/2)}get scrollWidth(){return this._el.scrollWidth}get scrollHeight(){return this._el.scrollHeight}get scrollTop(){return this._el.scrollTop}get scrollLeft(){return this._el.scrollLeft}set scrollTop(t){this._el.scrollTop=t,this.trigger("scroll",{top:t,left:this.scrollLeft})}set scrollLeft(t){this._el.scrollLeft=t,this.trigger("scroll",{top:this.scrollTop,left:t})}scrollTo(t,e=1e3,r="cubic"){t<0&&(t=0);const i=this.scrollTop,s=t-i;this._data.scrollAnimation&&this._data.scrollAnimation.cancel(),this._data.scrollAnimation=function(t,e){if(0===e)return t(1,0,()=>{}),Bt;const r=Date.now(),i=n();let s=0,o=!0;const a=()=>{o=!1,i.reject()};return function n(){o&&(!e||s<=e)&&window.requestAnimationFrame(n);const c=Date.now()-r;t(e?Math.min(1,c/e):c,c-s,a),e&&c>=e&&i.resolve();s=c}(),{cancel:a,promise:i.promise}}(t=>{const e=i+s*function(t,e=0,n=0){if(0===e)return 0;if(1===e)return 1;const[r,i]=t.split("-");return"in"===i?Ft(r,e,n):"out"===i?1-Ft(r,1-e,n):e<=.5?Ft(r,2*e,n)/2:1-Ft(r,2*(1-e),n)/2}(r,t);this.scrollTop=e,this.trigger("scroll",{top:e})},e)}scrollBy(t,e=1e3,n="cubic"){t&&this.scrollTo(this.scrollTop+t,e,n)}css(t,e){if(void 0===e){if("string"==typeof t)return window.getComputedStyle(this._el).getPropertyValue(t);{const e=Object.keys(t);for(const n of e)this._el.style.setProperty(n,""+t[n])}}else"string"==typeof t&&this._el.style.setProperty(t,""+e)}get transform(){return this.css("transform").replace("none","")}get transformMatrix(){const t=this.transform;if(!t)return[[1,0,0],[0,1,0]];const e=t.match(/matrix\(([0-9,.\s\-]*)\)/);if(!e||!e[1])return[[1,0,0],[0,1,0]];const n=e[1].split(",");return[[+n[0],+n[2],+n[4]],[+n[1],+n[3],+n[5]]]}get scale(){const t=this.transformMatrix;return[t[0][0],t[1][1]]}setTransform(t,e=0,n=1){let r="";t&&(r+=`translate(${x(t.x,.1)}px,${x(t.y,.1)}px)`),e&&(r+=` rotate(${e}rad)`),n&&(r+=` scale(${n})`),this._el.style.transform=r}translate(t,e){this.setTransform(new C(t,e))}show(){this.hasAttr("hidden")&&this.removeAttr("hidden"),"visibility"===this.data.display?this._el.style.visibility="visible":this._el.style.display=this.data.display||"block"}hide(){"visibility"===this.data.display?this._el.style.visibility="hidden":this._el.style.display="none"}toggle(t){t?this.show():this.hide()}is(t){return this._el.matches?this._el.matches(t):Array.from(document.querySelectorAll(t)).includes(this._el)}index(){let t=0,e=this._el;for(;void 0!==(e=e.previousSibling||void 0);)++t;return t}prepend(t){const e=this._el.childNodes;e.length?this._el.insertBefore(t._el,e[0]):this._el.appendChild(t._el)}append(t){this._el.appendChild(t._el)}insertBefore(t){this.parent._el.insertBefore(t._el,this._el)}insertAfter(t){const e=this._el.nextSibling;e?this.parent._el.insertBefore(t._el,e):this.parent._el.appendChild(t._el)}get next(){return St(this._el.nextSibling)}get prev(){return St(this._el.previousSibling)}$(t){return St(t,this)}$$(t){return function(t,e){const n=e?e._el:document.documentElement,r=t?n.querySelectorAll(t):[];return Array.from(r,t=>St(t))}(t,this)}get parent(){return St(this._el.parentElement||void 0)}parents(t){const e=[];let n=this.parent;for(;n;)t&&!n.is(t)||e.push(n),n=n.parent;return e}hasParent(...e){const n=e.map(t=>t._el);let r=this._el.parentNode;for(;r;){if(t(r,...n))return!0;r=r.parentNode}return!1}get children(){return Array.from(this._el.children||[],t=>St(t))}get childNodes(){return Array.from(this._el.childNodes,t=>t instanceof Text?t:St(t))}remove(){this._el&&this._el.parentNode&&this._el.parentNode.removeChild(this._el)}removeChildren(){for(;this._el.firstChild;)this._el.removeChild(this._el.firstChild)}on(t,e,n){for(const r of c(t))r in this._events?this._events[r].includes(e)||this._events[r].push(e):this._events[r]=[e],ht(this,r,e,n)}one(t,e,n){const r=n=>{this.off(t,r),e(n)};this.on(t,r,n)}off(t,e){for(const n of c(t))n in this._events&&(this._events[n]=e?this._events[n].filter(t=>t!==e):[]),ut(this,n,e)}trigger(t,e={}){for(const n of c(t)){if(!this._events[n])return;for(const t of this._events[n])t.call(this,e)}}onKeyDown(t,e){const n=c(t).map(t=>Vt[t]||t);this._el.addEventListener("keydown",t=>{n.indexOf(t.keyCode)>=0&&e(t)})}onPromise(t,e=!1){return e?Promise.resolve():new Promise(t=>this.one("solve",()=>t()))}animate(t,e=400,n=0,r="ease-in-out"){return Ut(this,t,e,n,r)}enter(t="fade",e=500,n=0){return function(t,e="fade",n=500,r=0){if(t.show(),!Rt)return Bt;const i=+t.css("opacity")||1;if("fade"===e)return Ut(t,{opacity:[0,i]},n,r);if("pop"===e){const e=t.transform.replace(/scale\([0-9.]*\)/,"").replace(Xt,"translate($1px,$2px)");return Ut(t,{opacity:[0,i]},n,r),Ut(t,{transform:[e+" scale(0.5)",e+" scale(1)"]},n,r,"bounce-in")}if("descend"===e){return Ut(t,{opacity:[0,1],transform:["translateY(-50%)","none"]},n,r)}if(e.startsWith("draw")){const i=t.strokeLength;t.css("stroke-dasharray",i+"px"),t.css("opacity")||t.css("opacity",1);const s=Ut(t,{"stroke-dashoffset":[i+"px","draw-reverse"===e?2*i+"px":0]},n,r,"linear");return s.promise.then(()=>t.css("stroke-dasharray","")),s}if(e.startsWith("slide")){const s={opacity:[0,i],transform:["translateY(50px)","none"]};return e.includes("down")&&(s.transform[0]="translateY(-50px)"),e.includes("right")&&(s.transform[0]="translateX(-50px)"),e.includes("left")&&(s.transform[0]="translateX(50px)"),Ut(t,s,n,r)}if(e.startsWith("reveal")){const s={opacity:[0,i],height:[0,"auto"]};return e.includes("left")&&(s.transform=["translateX(-50%)","none"]),e.includes("right")&&(s.transform=["translateX(50%)","none"]),Ut(t,s,n,r)}return Bt}(this,t,e,n)}exit(t="fade",e=500,n=0,r=!1){return function(t,e="fade",n=400,r=0,i=!1){if(!t._el)return Bt;if(!Rt)return t.hide(),Bt;if("none"===t.css("display"))return Bt;let s;if("fade"===e)s=Ut(t,{opacity:[1,0]},n,r);else if("pop"===e){const e=t.transform.replace(/scale\([0-9.]*\)/,"");Ut(t,{opacity:[1,0]},n,r),s=Ut(t,{transform:[e+" scale(1)",e+" scale(0.5)"]},n,r,"bounce-out")}else if("ascend"===e){s=Ut(t,{opacity:[1,0],transform:["none","translateY(-50%)"]},n,r)}else if(e.startsWith("draw")){const i=t.strokeLength;t.css("stroke-dasharray",i),s=Ut(t,{"stroke-dashoffset":["draw-reverse"===e?2*i+"px":0,i+"px"]},n,r,"linear")}else if(e.startsWith("slide")){const i={opacity:0,transform:"translateY(50px)"};e.includes("up")&&(i.transform="translateY(-50px)"),s=Ut(t,i,n,r)}else if(e.startsWith("reveal")){const i={opacity:0,height:0};e.includes("left")&&(i.transform="translateX(-50%)"),e.includes("right")&&(i.transform="translateX(50%)"),s=Ut(t,i,n,r)}return s.promise.then(()=>i?t.remove():t.hide()),s}(this,t,e,n,r)}effect(t){this.one("animationend",()=>this.removeClass("effects-"+t)),this.addClass("effects-"+t)}copy(t=!0,e=!0){const n=St(this._el.cloneNode(t));return e&&n.copyInlineStyles(this,t),n}copyInlineStyles(t,e=!0){const n=window.getComputedStyle(t._el);for(const t of Array.from(n))this.css(t,n.getPropertyValue(t));if(e){const e=this.children,n=t.children;for(let t=0;t<e.length;++t)e[t].copyInlineStyles(n[t],!0)}}}class _t extends bt{get offsetTop(){return this._el.offsetTop}get offsetLeft(){return this._el.offsetLeft}get offsetParent(){return St(this._el.offsetParent||void 0)}get width(){return this._el.offsetWidth}get height(){return this._el.offsetHeight}get innerWidth(){const t=parseFloat(this.css("padding-left")),e=parseFloat(this.css("padding-right"));return this._el.clientWidth-t-e}get innerHeight(){const t=parseFloat(this.css("padding-bottom")),e=parseFloat(this.css("padding-top"));return this._el.clientHeight-t-e}get outerWidth(){const t=parseFloat(this.css("margin-left")),e=parseFloat(this.css("margin-right"));return this.width+t+e||0}get outerHeight(){const t=parseFloat(this.css("margin-bottom")),e=parseFloat(this.css("margin-top"));return this.height+t+e||0}get positionTop(){let t=this._el,e=0;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e}get positionLeft(){let t=this._el,e=0;for(;t;)e+=t.offsetLeft,t=t.offsetParent;return e}offset(t){if(t._el===this._el.offsetParent){const e=this.offsetTop+t._el.clientTop,n=this.offsetLeft+t._el.clientLeft;return{top:e,left:n,bottom:e+this.height,right:n+this.width}}{const e=t._el.getBoundingClientRect(),n=this._el.getBoundingClientRect();return{top:n.top-e.top,left:n.left-e.left,bottom:n.bottom-e.top,right:n.right-e.left}}}}class Mt extends bt{constructor(){super(...arguments),this.type="svg"}get $ownerSVG(){return St(this._el.ownerSVGElement||void 0)}get width(){return this.bounds.width}get height(){return this.bounds.height}get positionLeft(){const t=this._el.getBBox().x+this._el.getCTM().e;return this.$ownerSVG.positionLeft+t}get positionTop(){const t=this._el.getBBox().y+this._el.getCTM().f;return this.$ownerSVG.positionTop+t}get inverseTransformMatrix(){const t=this._el.getScreenCTM().inverse(),e=[[t.a,t.c,t.e],[t.b,t.d,t.f]];if(qt.isFirefox){const t=this.transformMatrix;e[0][2]-=t[0][2],e[1][2]-=t[1][2]}return e}setTransform(t,e=0,n=1){const r=t?`translate(${x(t.x,.1)} ${x(t.y,.1)})`:"",i=y(e,0)?"":`rotate(${180*e/Math.PI})`,s=y(n,1)?"":`scale(${n})`;this.setAttr("transform",[r,i,s].join(" "))}get strokeLength(){if(this._el instanceof SVGGeometryElement)return this._el.getTotalLength();{const t=this.bounds;return 2*t.height+2*t.width}}getPointAtLength(t){if(this._el instanceof SVGGeometryElement){const e=this._el.getPointAtLength(t);return new C(e.x,e.y)}return new C(0,0)}getPointAt(t){return this.getPointAtLength(t*this.strokeLength)}get points(){return function(t){if(!t)return[];const e=t.match(vt)||[],n=[];for(const t of e){const e=(t.slice(1).match(xt)||[]).map(t=>+t),r=t[0].toUpperCase(),i=r!==t[0],s=yt[r]||2;for(let t=0;t<e.length;t+=s){const r=e[t+s-2],a=e[t+s-1];n.push(i?o(n).shift(r,a):new C(r,a))}}return n}(this.attr("d"))}set points(t){const e=t.length?"M"+t.map(t=>t.x+","+t.y).join("L"):"";this.setAttr("d",e)}addPoint(t){const e=this.attr("d")+" L "+t.x+","+t.y;this.setAttr("d",e)}get center(){const t=+this.attr("TEXT"===this.tagName?"x":"cx"),e=+this.attr("TEXT"===this.tagName?"y":"cy");return new C(t,e)}setCenter(t){this.setAttr("TEXT"===this.tagName?"x":"cx",t.x),this.setAttr("TEXT"===this.tagName?"y":"cy",t.y)}setLine(t,e){this.setAttr("x1",t.x),this.setAttr("y1",t.y),this.setAttr("x2",e.x),this.setAttr("y2",e.y)}setRect(t){this.setAttr("x",t.p.x),this.setAttr("y",t.p.y),this.setAttr("width",t.w),this.setAttr("height",t.h)}draw(t,e={}){if(!t)return this.setAttr("d","");const n={mark:this.attr("mark"),arrows:this.attr("arrows"),size:+this.attr("size")||void 0,fill:this.hasClass("fill"),round:this.hasAttr("round")};this.setAttr("d",wt(t,function(t,e){for(let n of Object.keys(e))t.hasOwnProperty(n)||(t[n]=e[n]);return t}(e,n)))}}class At extends Mt{get viewBox(){return this._el.viewBox.baseVal||{width:0,height:0}}get $ownerSVG(){return this}get positionLeft(){return parseInt(this.css("margin-left"))+this.parent.positionLeft}get positionTop(){return parseInt(this.css("margin-top"))+this.parent.positionTop}get svgWidth(){return this.viewBox.width||this.width}get svgHeight(){return this.viewBox.height||this.height}pngImage(t){return m(this,void 0,void 0,(function*(){const e=this.copy(!0,!0),n=t||this.svgWidth,r=t||this.svgHeight;e.setAttr("width",n),e.setAttr("height",r);const i=(new XMLSerializer).serializeToString(e._el);let s="data:image/svg+xml;utf8,"+encodeURIComponent(i);s=s.replace("svg ",'svg xmlns="http://www.w3.org/2000/svg" ');const o=Pt("canvas",{width:n,height:r});o.ctx.fillStyle="#fff",o.ctx.fillRect(0,0,n,r);const a=yield function(t){return new Promise(e=>{const n=new Image;n.onload=()=>e(n),n.src=t})}(s);return o.ctx.drawImage(a,0,0,n,r),o.pngImage}))}downloadImage(t){const e=qt.isIOS?window.open("","_blank"):void 0;this.pngImage().then(n=>{if(e)return e.location.href=n;Pt("a",{download:t,href:n,target:"_blank"})._el.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}))})}}class Ct extends _t{constructor(){super(...arguments),this.type="window"}get width(){return window.innerWidth}get height(){return window.innerHeight}get innerWidth(){return window.innerWidth}get innerHeight(){return window.innerHeight}get outerWidth(){return window.outerWidth}get outerHeight(){return window.outerHeight}get scrollWidth(){return document.body.scrollWidth}get scrollHeight(){return document.body.scrollHeight}get scrollTop(){return window.pageYOffset}get scrollLeft(){return window.pageXOffset}set scrollTop(t){document.body.scrollTop=document.documentElement.scrollTop=t,this.trigger("scroll",{top:t,left:this.scrollLeft})}set scrollLeft(t){document.body.scrollLeft=document.documentElement.scrollLeft=t,this.trigger("scroll",{top:this.scrollTop,left:t})}}class Lt extends _t{constructor(){super(...arguments),this.type="form"}get action(){return this._el.action}get formData(){const t={};for(const e of Array.from(this._el.elements)){const n=e.name||e.id;n&&(t[n]=e.value)}return t}get isValid(){return this._el.checkValidity()}}class kt extends _t{constructor(){super(...arguments),this.type="input"}get checked(){return this._el instanceof HTMLInputElement&&this._el.checked}get value(){return this._el.value}set value(t){this._el.value=t}bindVariable(t,e){t[e]=this.value,this.change(n=>t[e]=n),t.watch(()=>this.value=t[e])}change(t){let e="";this.on("change keyup input paste",()=>{this.value!==e&&(e=this.value.trim(),t(e))})}validate(t){this.change(e=>this.setValidity(t(e)))}setValidity(t){this._el.setCustomValidity(t)}get isValid(){return this._el.checkValidity()}}class Tt extends _t{constructor(){super(...arguments),this.type="canvas"}getContext(t="2d",e={}){return this._el.getContext(t,e)}get pngImage(){return this._el.toDataURL("image/png")}get canvasWidth(){return this._el.width}get canvasHeight(){return this._el.height}get ctx(){return this._ctx||(this._ctx=this.getContext()),this._ctx}draw(t,e={}){this.ctx.save(),function(t,e,n={}){if(n.fill&&(t.fillStyle=n.fill),n.opacity&&(t.globalAlpha=n.opacity),n.stroke&&(t.strokeStyle=n.stroke,t.lineWidth=n.strokeWidth||1,n.lineCap&&(t.lineCap=n.lineCap),n.lineJoin&&(t.lineJoin=n.lineJoin)),t.beginPath(),"segment"===e.type)e=e,t.moveTo(e.p1.x,e.p1.y),t.lineTo(e.p2.x,e.p2.y);else if("circle"===e.type)e=e,t.arc(e.c.x,e.c.y,e.r,0,2*Math.PI);else if("polygon"===e.type||"triangle"===e.type){e=e,t.moveTo(e.points[0].x,e.points[0].y);for(const n of e.points.slice(1))t.lineTo(n.x,n.y);t.closePath()}else if("polyline"===e.type){e=e,t.moveTo(e.points[0].x,e.points[0].y);for(const n of e.points.slice(1))t.lineTo(n.x,n.y)}n.fill&&t.fill(),n.stroke&&t.stroke()}(this.ctx,t,e),this.ctx.restore()}clear(){this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight)}fill(t){this.ctx.save(),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.ctx.restore()}clearCircle(t,e){this.ctx.save(),this.ctx.globalCompositeOperation="destination-out",this.ctx.beginPath(),this.ctx.arc(t.x,t.y,e,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.restore()}downloadImage(t){Pt("a",{download:t,href:this.pngImage,target:"_blank"})._el.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}))}}class Et extends _t{play(){return this._el.play()||Promise.resolve()}pause(){return this._el.pause()}}const $t=["path","rect","circle","ellipse","polygon","polyline","g","defs","marker","line","text","pattern","mask","svg","foreignObject"];function St(t,e){if(!t)return;const n=e?e._el:document.documentElement,r="string"==typeof t?n.querySelector(t):t;if(!r)return;if(r._view)return r._view;const i=(r.tagName||"").toLowerCase();return"svg"===i?new At(r):"canvas"===i?new Tt(r):"form"===i?new Lt(r):"input"===i||"select"===i?new kt(r):"video"===i||"audio"===i?new Et(r):$t.includes(i)?new Mt(r):new _t(r)}function Pt(t,e={},n){const r=$t.includes(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);for(const[t,n]of Object.entries(e))void 0!==n&&("id"===t?r.id=n:"html"===t?r.innerHTML=n:"text"===t?r.textContent=n:"path"===t?r.setAttribute("d",wt(n)):r.setAttribute(t,n));const i=St(r);return n&&n.append(i),i}const Ot=new Ct(document.body),It=new Ct(document.documentElement),Vt={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46};var qt;!function(t){const e=window.navigator.userAgent.toLowerCase();t.isMobile=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e),t.isRetina=(window.devicePixelRatio||1)>1,t.isTouch=!!window.Touch||"ontouchstart"in window,t.isChrome=!!window.chrome,t.isFirefox=e.indexOf("firefox")>=0,t.isAndroid=e.indexOf("android")>=0,t.isIOS=/iphone|ipad|ipod/i.test(e),t.isSafari=/^((?!chrome|android).)*safari/i.test(e),t.redraw=function(){document.body.offsetHeight};const n=[];let s=!1;function o(){if(!s){s=!0;for(const t of n)t();setTimeout(h)}}window.onload=o,document.addEventListener("DOMContentLoaded",o),t.ready=function(t){s?t():n.push(t)};const a=[];t.width=window.innerWidth,t.height=window.innerHeight;const l=r(()=>{t.width=window.innerWidth,t.height=window.innerHeight;for(const e of a)e({width:t.width,height:t.height});Ot.trigger("scroll",{top:Ot.scrollTop})});function h(){l()}function u(t,e,n=31536e3){document.cookie=`${t}=${e};path=/;max-age=${n}`}t.onResize=function(e){e({width:t.width,height:t.height}),a.push(e)},t.offResize=function(t){const e=a.indexOf(t);e>=0&&a.splice(e,1)},t.resize=h,window.addEventListener("resize",()=>{const e=window.innerWidth,n=window.innerHeight;t.width===e&&t.height===n||(t.width=e,t.height=n,l())}),t.getHash=function(){return window.location.hash.slice(1)},t.setHash=function(t){const e=document.body.scrollTop;window.location.hash=t,document.body.scrollTop=e},t.getCookies=function(){const t=document.cookie.split(";"),e={};for(let n=0,r=t.length;n<r;++n){const r=t[n].split("=");r[0]=r[0].replace(/^\s+|\s+$/,""),e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e},t.getCookie=function(t){const e=document.cookie.match(new RegExp(`(^|;) ?${t}=([^;]*)(;|$)`));return e?e[2]:void 0},t.setCookie=u,t.deleteCookie=function(t){u(t,"",-1)};const d="_M";function f(t,e){const n=(t||"").split("."),r=i(window.localStorage.getItem(d)||void 0);let s=r;for(let t=0;t<n.length-1;++t)null==s[n[t]]&&(s[n[t]]={}),s=s[n[t]];s[n[n.length-1]]=e,window.localStorage.setItem(d,JSON.stringify(r))}function p(){const t=document.activeElement;return t===document.body?void 0:St(t)}t.setStorage=f,t.getStorage=function(t){let e=i(window.localStorage.getItem(d)||void 0);if(!t)return e;const n=(t||"").split("."),r=n.pop();for(const t of n){if(!(t in e))return;e=e[t]}return e[r]},t.deleteStorage=function(t){t?f(t,void 0):window.localStorage.setItem(d,"")},t.getActiveInput=p,t.onKey=function(t,e,n=!1){const r=c(t),i=r.map(t=>Vt[t]||t),s=n?"keyup":"keydown";document.addEventListener(s,(function(t){const n=p();if(n&&(n.is("input, textarea, [contenteditable]")||n.hasAttr("tabindex")))return;const s=i.findIndex(e=>t.keyCode===e||t.key===e);s>=0&&e(t,r[s])}))}}(qt||(qt={}));const Nt=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||+(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||+(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537,Wt={};function Ht(){if(!Nt)return;Array.from(document.querySelectorAll("svg > use")).forEach((function(t){const e=t.getAttribute("xlink:href"),[n,r]=e.split("#");if(!n.length||!r)return;const i=t.parentNode;i.removeChild(t),n in Wt||(Wt[n]=fetch(n).then(t=>t.text())),Wt[n].then(t=>{const e=document.implementation.createHTMLDocument("");e.documentElement.innerHTML=t;const n=e.getElementById(r).cloneNode(!0),s=document.createDocumentFragment();for(;n.childNodes.length;)s.appendChild(n.firstChild);i.appendChild(s)})}))}let Rt=!1;setTimeout(()=>Rt=!0);const zt="cubic-bezier(0.175, 0.885, 0.32, 1.275)",jt="cubic-bezier(0.68, -0.275, 0.825, 0.115)",Bt={cancel:()=>{},promise:Promise.resolve()};function Ft(t,e=0,n=0){switch(t){case"quad":return e**2;case"cubic":return e**3;case"quart":return e**4;case"quint":return e**5;case"circ":return 1-Math.sqrt(1-e**2);case"sine":return 1-Math.cos(e*Math.PI/2);case"exp":return e<=0?0:Math.pow(2,10*(e-1));case"back":return n||(n=1.70158),e*e*((n+1)*e-n);case"elastic":return n||(n=.3),-Math.pow(2,10*(e-1))*Math.sin((2*(e-1)/n-.5)*Math.PI);case"swing":return.5-Math.cos(e*Math.PI)/2;case"spring":return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e);case"bounce":return e<1/11?1/64-7.5625*(.5/11-e)*(.5/11-e):e<3/11?1/16-7.5625*(2/11-e)*(2/11-e):e<7/11?.25-7.5625*(5/11-e)*(5/11-e):1-7.5625*(1-e)*(1-e);default:return e}}function Ut(t,e,r=400,i=0,s="ease-in-out"){if(!Rt)return Object.keys(e).forEach(n=>{const r=e[n];t.css(n,Array.isArray(r)?r[1]:r)}),Bt;"bounce-in"===s&&(s=zt),"bounce-out"===s&&(s=jt);let o="";qt.isSafari&&(o=t._el.style.transition,t.css("transition","none"),qt.redraw());const c=t._data.animation;c&&c.cancel();const l={},h={},u=n(),d=window.getComputedStyle(t._el);Object.keys(e).forEach(n=>{const r=e[n],s=function(t){return t.toLowerCase().replace(/^-/,"").replace(/-(.)/g,(t,e)=>e.toUpperCase())}(n);h[s]=Array.isArray(r)?r[0]:d.getPropertyValue(n),l[s]=Array.isArray(r)?r[1]:r,i&&t.css(n,h[s])});const f=l.height;let p;"auto"===l.height&&(l.height=a(t.children.map(t=>t.outerHeight))+"px");let g=!1;!function(t,e=0){e?setTimeout(t,e):t()}(()=>{g||((p=t._el.animate([h,l],{duration:r,easing:s,fill:"forwards"})).onfinish=()=>{t._el&&Object.keys(e).forEach(e=>t.css(e,"height"===e?f:l[e])),qt.isSafari&&t.css("transition",o),u.resolve(),p.cancel()})},i);const m={cancel(){g=!0,t._el&&Object.keys(e).forEach(e=>t.css(e,t.css(e))),p&&p.cancel()},promise:u.promise};return setTimeout(()=>t._data.animation=m),m}const Xt=/matrix\([0-9.\-\s]+,[0-9.\-\s]+,[0-9.\-\s]+,[0-9.\-\s]+,([0-9.\-\s]+),([0-9.\-\s]+)\)/;function Dt(t,e){const n=e.regex.exec(t);if(n){n.shift();const t={};for(const[r,i]of e.params.entries())t[i]=n[r];return t}}let Gt="complete"===document.readyState;window.addEventListener("load",()=>setTimeout(()=>Gt=!0)),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");new class extends l{constructor(){super(...arguments),this.$viewport=Ot,this.views=[],this.active={path:"",hash:"",index:0},this.search=window.location.search,this.preloaded=!1,this.transition=!1,this.noLoad=!1,this.initialise=()=>{}}setup(t={}){t.$viewport&&(this.$viewport=t.$viewport),t.initialise&&(this.initialise=t.initialise),t.preloaded&&(this.preloaded=t.preloaded),t.transition&&(this.transition=t.transition),t.noLoad&&(this.noLoad=t.noLoad),t.click&&Ot.on("click",t=>this.onLinkClick(t)),t.history&&window.addEventListener("popstate",t=>{Gt&&t.state&&this.goToState(t.state)})}view(t,{enter:e,exit:n,template:r}={}){const i=(t.match(/:\w+/g)||[]).map(t=>t.substr(1)),s=t.replace(/:\w+/g,"([\\w-]+)").replace("/","\\/")+"\\/?",o=t.includes("?")?"":"(\\?.*)?",a={regex:new RegExp("^"+s+o+"$","i"),params:i,enter:e,exit:n,template:r};this.views.push(a);const c=Dt(window.location.pathname,a);c&&(this.active={path:window.location.pathname+this.search,hash:window.location.hash,index:0},window.history.replaceState(this.active,"",this.active.path+this.active.hash),qt.ready(()=>{setTimeout(()=>{this.preloaded?(this.initialise(this.$viewport,c),a.enter&&a.enter(this.$viewport,c)):this.loadView(a,c,window.location.pathname)})}))}paths(...t){for(const e of t)this.view(e)}getView(t){for(const e of this.views){const n=Dt(t,e);if(n)return{view:e,params:n}}}load(t,e=""){const n=this.getView(t);return t===this.active.path&&e!==this.active.hash?(console.info("[boost] Routing to "+t+e),this.trigger("hashChange",e.slice(1)),this.trigger("change",t+e),!0):!(!n||t===this.active.path)&&(console.info("[boost] Routing to "+t+e),this.trigger("change",t+e),window.ga&&window.ga("send","pageview",t+e),this.noLoad?n.view.enter&&n.view.enter(this.$viewport,n.params):this.loadView(n.view,n.params,t),!0)}loadView(t,e={},n=""){return m(this,void 0,void 0,(function*(){this.$viewport.css({opacity:.4,"pointer-events":"none"});const r=yield function(t,e,n){return m(this,void 0,void 0,(function*(){if(t.template)return"string"==typeof t.template?t.template:t.template(e);return(yield fetch(n+(n.indexOf("?")>=0?"&xhr=1":"?xhr=1"))).text()}))}(t,e,n);this.$viewport.css("opacity",0),setTimeout(()=>{this.$viewport.removeChildren(),Ot.scrollTop=0,this.$viewport.html=r,qt.resize(),Ht(),this.$viewport.css({opacity:1,"pointer-events":"all"});const n=this.$viewport.$("title");n&&(document.title=n.text),this.initialise(this.$viewport,e),t.enter&&t.enter(this.$viewport,e),this.trigger("afterChange",{$viewport:this.$viewport})},350)}))}onLinkClick(t){if(t.metaKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;let e=t.target;for(;e&&"A"!==e.nodeName;)e=e.parentNode;if(!e||"A"!==e.nodeName)return;const n=e;if(n.target)return;if(n.origin!==window.location.origin)return;if(n.hasAttribute("download")||"external"===n.getAttribute("rel"))return;const r=n.getAttribute("href");r&&r.indexOf("mailto:")>-1||this.goTo(n.pathname+n.search,n.hash)&&t.preventDefault()}goToState(t){if(!t||!t.path)return;const e=this.load(t.path+this.search,t.hash);e&&t.index<this.active.index&&this.trigger("back"),e&&t.index>this.active.index&&this.trigger("forward"),this.active=t}goTo(t,e=""){const n=this.load(t,e);if(n){const n=this.active?this.active.index+1:0;this.active={path:t,hash:e,index:n},window.history.pushState(this.active,"",t+e)}return n}back(){window.history.back()}forward(){window.history.forward()}};It.addClass((qt.isMobile?"is":"not")+"-mobile"),Ht(),qt.ready(()=>{const t=St(".api-body");if(!t)return;const e=St(".sidebar-body"),n=[];let r,i,s;t.$$("h2, h3").forEach((t,i)=>{const s=t.$("a").id;let o,a;t.is("h2")?(o=Pt("a",{href:"#"+s,html:t.text},e),r=a=Pt("div",{class:"hidden"},e)):(o=Pt("a",{href:"#"+s,html:s.replace("+","#").replace("module_","")},r),a=r),qt.onResize(()=>n[i]=[t.positionTop,o,a])}),Ot.on("scroll",(function({top:t}){let e=function(t){for(let e of n)if(e[0]>t)return e}(t);e[1]!==i&&(i&&i.removeClass("active"),(i=e[1]).addClass("active")),e[2]!==s&&(s&&s.addClass("hidden"),(s=e[2])&&s.removeClass("hidden"))}))})}();